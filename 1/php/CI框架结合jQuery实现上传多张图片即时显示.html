<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修CI框架结合jQuery实现上传多张图片即时显示' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>CI框架结合jQuery实现上传多张图片即时显示</center></div><div class='banquan'>原文出处:本文由博客园博主提供。<br/>
原文连接:https://www.cnblogs.com/phperlinxinlan/p/11077697.html</div><br>
    <p>一、Html代码如下：</p>
<div class="cnblogs_code">
<pre> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">tr</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">td </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="txt_r"</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">span </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="orange"</span><span style="color: #0000ff;">&gt;</span>* <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>上传图片：<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">td</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">td </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="picInput"</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">form </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="upload_form"</span><span style="color: #ff0000;">  method</span><span style="color: #0000ff;">="post"</span><span style="color: #ff0000;"> enctype</span><span style="color: #0000ff;">="multipart/form-data"</span><span style="color: #ff0000;"> style</span><span style="color: #0000ff;">=""</span><span style="color: #ff0000;"> action</span><span style="color: #0000ff;">="/admin/upload/uploadCover"</span> <span style="color: #0000ff;">&gt;</span>
                  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">input </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="file"</span><span style="color: #ff0000;"> size</span><span style="color: #0000ff;">="30"</span><span style="color: #ff0000;"> name</span><span style="color: #0000ff;">="userfile[]"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="userfile"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="input"</span><span style="color: #ff0000;"> onchange</span><span style="color: #0000ff;">="$('#upload_form').submit();return false;"</span><span style="color: #ff0000;"> multiple</span><span style="color: #0000ff;">="multiple"</span><span style="color: #0000ff;">&gt;</span>
            <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">form</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">td</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">tr</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">tr</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;<span style="color: #800000;">td<span style="color: #0000ff;">&gt;<br />    &lt;/<span style="color: #800000;">td<span style="color: #0000ff;">&gt; <br /><span style="color: #0000ff;">    &lt;<span style="color: #800000;">td<span style="color: #0000ff;">&gt; <br /><span style="color: #0000ff;">       &lt;<span style="color: #800000;">div <span style="color: #ff0000;">id<span style="color: #0000ff;">="preview_cover"<span style="color: #ff0000;"> style<span style="color: #0000ff;">="display:none;margin-top: 5px;" <span style="color: #0000ff;">&gt;<br />       <span style="color: #0000ff;">&lt;/<span style="color: #800000;">div<span style="color: #0000ff;">&gt;<br /><span style="color: #0000ff;">    &lt;/<span style="color: #800000;">td<span style="color: #0000ff;">&gt;<br /><span style="color: #0000ff;">&lt;/<span style="color: #800000;">tr<span style="color: #0000ff;">&gt;</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>              </code></pre>

<p>二、jQuery代码如下：</p>
<div class="cnblogs_code">
<pre><span style="color: #ffc66d;">$(<span style="color: #cc7832; font-weight: bold;">function(){<br />    <span style="color: #ffc66d;">$(<span style="color: #6a8759;">'#upload_form').<span style="color: #ffc66d;">submit(<span style="color: #cc7832; font-weight: bold;">function(){<br />       <span style="color: #cc7832; font-weight: bold;">var val = <span style="color: #ffc66d;">$(<span style="color: #6a8759;">"#userfile").<span style="color: #ffc66d;">val()<span style="color: #cc7832;">;<br /><span style="color: #cc7832;"><br /><span style="color: #cc7832;">       <span style="color: #cc7832; font-weight: bold;">if(val === <span style="color: #6a8759;">''){<br />           <span style="color: #ffc66d;">weebox_popInfo(<span style="color: #6a8759;">'e'<span style="color: #cc7832;">,<span style="color: #6a8759;">'<span style="color: #6a8759; font-family: '宋体';">请选择要上传的图片！<span style="color: #6a8759;">'<span style="color: #cc7832;">,<span style="color: #6a8759;">''<span style="color: #cc7832;">,<span style="color: #6a8759;">'alert')<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">           <span style="color: #cc7832; font-weight: bold;">return false<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">       }<br />       <span style="color: #cc7832; font-weight: bold;">var filepath =<span style="color: #6a8759;">/\.(jpg|jpeg|gif|JPG|JPEG|GIF|PNG|png)$/i<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">       <span style="color: #cc7832; font-weight: bold;">if(!filepath.<span style="color: #ffc66d;">test(val)){<br />           <span style="color: #ffc66d;">weebox_popInfo(<span style="color: #6a8759;">'e'<span style="color: #cc7832;">,<span style="color: #6a8759;">'<span style="color: #6a8759; font-family: '宋体';">要求为图片文件！<span style="color: #6a8759;">'<span style="color: #cc7832;">,<span style="color: #6a8759;">''<span style="color: #cc7832;">,<span style="color: #6a8759;">'alert')<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">           <span style="color: #cc7832; font-weight: bold;">return false<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">       }<br />       <span style="color: #ffc66d;">$(<span style="color: #cc7832; font-weight: bold;">this).<span style="color: #ffc66d;">ajaxSubmit(uploadOptions)<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">       <span style="color: #cc7832; font-weight: bold;">return false<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">   })<span style="color: #cc7832;">;<br /><span style="color: #cc7832;"><br /><span style="color: #cc7832;">        <span style="color: #cc7832; font-weight: bold;">var uploadOptions = {<br />       <span style="color: #9876aa;">dataType:<span style="color: #6a8759;">'json'<span style="color: #cc7832;">,<br /><span style="color: #cc7832;">       <span style="color: #9876aa;">clearForm:<span style="color: #cc7832; font-weight: bold;">true<span style="color: #cc7832;">,<br /><span style="color: #cc7832;">       <span style="color: #9876aa;">resetForm:<span style="color: #cc7832; font-weight: bold;">true<span style="color: #cc7832;">,<br /><span style="color: #cc7832;">       <span style="color: #ffc66d;">beforeSubmit: <span style="color: #ffc66d;">beforeSubmit<span style="color: #cc7832;">,<br /><span style="color: #cc7832;">       <span style="color: #ffc66d;">success: <span style="color: #cc7832; font-weight: bold;">function(json) {<br />           <span style="color: #cc7832; font-weight: bold;">var imgStr = <span style="color: #6a8759;">""<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">           <span style="color: #cc7832; font-weight: bold;">var urlString = <span style="color: #6a8759;">""<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">           <span style="color: #cc7832; font-weight: bold;">if(json.<span style="color: #9876aa;">code==<span style="color: #6897bb;">1){<br />               <span style="color: #cc7832; font-weight: bold;">var imgArr = json.<span style="color: #9876aa;">url<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">               <span style="color: #cc7832; font-weight: bold;">if($.<span style="color: #ffc66d;">isArray(imgArr)){<br />                   urlString = imgArr.<span style="color: #ffc66d;">join(<span style="color: #6a8759;">',')<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                   <span style="color: #cc7832; font-weight: bold;">for(<span style="color: #cc7832; font-weight: bold;">var i=<span style="color: #6897bb;">0<span style="color: #cc7832;">;i&lt;imgArr.<span style="color: #9876aa;">length<span style="color: #cc7832;">;i++){<br />                       imgStr += <span style="color: #6a8759;">"&lt;div id='thumb"+i+<span style="color: #6a8759;">"' style='width:100px; height:125px; float:left;margin-right: 10px;'&gt;"<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                       imgStr += <span style="color: #6a8759;">"&lt;img src='"+imgArr[i]+<span style="color: #6a8759;">"' style='width: 100px;height: 100px;float: left;'/&gt;&lt;br/&gt;"<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                       imgStr += <span style="color: #6a8759;">"&lt;input type='radio' name='default_picture' id='default_picture' value='"+imgArr[i]+<span style="color: #6a8759;">"' style='width: 20px;height: 18px;float:left;' /&gt;<span style="color: #6a8759; font-family: '宋体';">主图<span style="color: #6a8759;">"<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                       imgStr += <span style="color: #6a8759;">"&lt;a id='delete' onclick='<span style="color: #ffc66d;">delete_cover<span style="color: #6a8759;">(this)' style='width: 20px;height: 20px;margin-left: 12px;text-decoration: none;color:#ff5a54;'&gt;<span style="color: #6a8759; font-family: '宋体';">删除<span style="color: #6a8759;">&lt;/a&gt;"<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                       imgStr += <span style="color: #6a8759;">"&lt;/div&gt;"<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                   }<br />               }<span style="color: #cc7832; font-weight: bold;">else{<br />                   urlString = imgArr<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                   imgStr += <span style="color: #6a8759;">"&lt;div id='thumb0' style='width:100px; height:125px; float:left;margin-right: 10px;'&gt;"<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                   imgStr += <span style="color: #6a8759;">"&lt;img src='"+imgArr+<span style="color: #6a8759;">"' style='width: 100px;height: 100px;float: left;'/&gt;&lt;br/&gt;"<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                   imgStr += <span style="color: #6a8759;">"&lt;input type='radio' name='default_picture' id='default_picture' value='"+imgArr+<span style="color: #6a8759;">"' style='width: 20px;height: 18px;float:left;' /&gt;<span style="color: #6a8759; font-family: '宋体';">主图<span style="color: #6a8759;">"<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                   imgStr += <span style="color: #6a8759;">"&lt;a id='delete' onclick='<span style="color: #ffc66d;">delete_cover<span style="color: #6a8759;">(this)' style='width: 20px;height: 20px;margin-left: 12px;text-decoration: none;color:#ff5a54;'&gt;<span style="color: #6a8759; font-family: '宋体';">删除<span style="color: #6a8759;">&lt;/a&gt;"<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                   imgStr += <span style="color: #6a8759;">"&lt;/div&gt;"<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">               }<br />               <span style="color: #cc7832; font-weight: bold;">var existUrl = <span style="color: #ffc66d;">$(<span style="color: #6a8759;">"#pictures").<span style="color: #ffc66d;">val()<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">               <span style="color: #cc7832; font-weight: bold;">var inputTab = <span style="color: #6a8759;">""<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">               <span style="color: #cc7832; font-weight: bold;">if(<span style="color: #cc7832; font-weight: bold;">typeof existUrl !== <span style="color: #6a8759;">"undefined"){<br />                   <span style="color: #cc7832; font-weight: bold;">var existArr = existUrl.<span style="color: #ffc66d;">split(<span style="color: #6a8759;">',')<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                   <span style="color: #cc7832; font-weight: bold;">for(<span style="color: #cc7832; font-weight: bold;">var j=<span style="color: #6897bb;">0<span style="color: #cc7832;">;j&lt;imgArr.<span style="color: #9876aa;">length<span style="color: #cc7832;">;j++){<br />                       existArr.<span style="color: #ffc66d;">push(imgArr[j])<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                   }<br />                   <span style="color: #cc7832; font-weight: bold;">var changeUrl = existArr.<span style="color: #ffc66d;">join(<span style="color: #6a8759;">',')<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">                   <span style="color: #ffc66d;">$(<span style="color: #6a8759;">"#pictures").<span style="color: #ffc66d;">val(changeUrl)<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">               }<span style="color: #cc7832; font-weight: bold;">else{<br />                   inputTab = <span style="color: #6a8759;">"&lt;input type='hidden' name='pictures' id='pictures' value='"+urlString+<span style="color: #6a8759;">"'&gt;"<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">               }<br />               imgStr += inputTab<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">               <span style="color: #ffc66d;">$(<span style="color: #6a8759;">'#preview_cover').<span style="color: #ffc66d;">append(imgStr).<span style="color: #ffc66d;">show()<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">           }<span style="color: #cc7832; font-weight: bold;">else{<br />               <span style="color: #ffc66d;">weebox_popInfo(<span style="color: #6a8759;">'e'<span style="color: #cc7832;">,json.<span style="color: #9876aa;">msg<span style="color: #cc7832;">,<span style="color: #6a8759;">''<span style="color: #cc7832;">,<span style="color: #6a8759;">'alert')<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">           }<br />       }<br /><br />   }<span style="color: #cc7832;">;<br /><span style="color: #cc7832;"><br /><span style="color: #cc7832;">   <span style="color: #cc7832; font-weight: bold;">var <span style="color: #ffc66d;">beforeSubmit = <span style="color: #cc7832; font-weight: bold;">function() {}<br />})<br /><br /><br /><span style="color: #cc7832; font-weight: bold;">function <span style="color: #ffc66d;">delete_cover(tag) {<br /><br />    <span style="color: #cc7832; font-weight: bold;">if(<span style="color: #ffc66d;">$(tag).<span style="color: #ffc66d;">prev().<span style="color: #ffc66d;">attr(<span style="color: #6a8759;">"checked")){<br />        <span style="color: #ffc66d;">weebox_popInfo(<span style="color: #6a8759;">'i'<span style="color: #cc7832;">, <span style="color: #6a8759;">"<span style="color: #6a8759; font-family: '宋体';">不能删除主图！<span style="color: #6a8759;">")<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">    }<span style="color: #cc7832; font-weight: bold;">else{<br />        <span style="color: #ffc66d;">$(tag).<span style="color: #ffc66d;">parent().<span style="color: #ffc66d;">remove()<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">    }<br /><br />    <span style="color: #cc7832; font-weight: bold;">var checked_img = <span style="color: #ffc66d;">$(tag).<span style="color: #ffc66d;">prev().<span style="color: #ffc66d;">val()<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">    <span style="color: #cc7832; font-weight: bold;">var pictures = <span style="color: #ffc66d;">$(<span style="color: #6a8759;">'#pictures').<span style="color: #ffc66d;">val()<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">    <span style="color: #cc7832; font-weight: bold;">var pictureArr = pictures.<span style="color: #ffc66d;">split(<span style="color: #6a8759;">',')<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">    <span style="color: #cc7832; font-weight: bold;">for(<span style="color: #cc7832; font-weight: bold;">var i=<span style="color: #6897bb;">0<span style="color: #cc7832;">;i&lt;pictureArr.length<span style="color: #cc7832;">;i++){<br />        <span style="color: #cc7832; font-weight: bold;">if(checked_img == pictureArr[i]){<br />            pictureArr.<span style="color: #ffc66d;">splice(i<span style="color: #cc7832;">,<span style="color: #6897bb;">1)<span style="color: #cc7832;">;<br /><span style="color: #cc7832;">        }<br />    }<br />    <span style="color: #ffc66d;">$(<span style="color: #6a8759;">"#pictures").<span style="color: #ffc66d;">val(pictureArr)<span style="color: #cc7832;">;<br /><span style="color: #cc7832;"><br />}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>

<p>三、PHP代码如下：</p>
<div class="cnblogs_code">
<pre>  <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> uploadCover()
  {<br />    <span style="color: #800080;">$dirpath='./upload/profile/'<span style="color: #000000;">;<br />    <span style="color: #0000ff;">if(!<span style="color: #008080;">is_dir(<span style="color: #800080;">$dirpath<span style="color: #000000;">)){<br />        <span style="color: #008080;">mkdir(<span style="color: #800080;">$dirpath<span style="color: #000000;">); <br />    } <br />    <span style="color: #800080;">$config['upload_path'] = <span style="color: #800080;">$dirpath<span style="color: #000000;">; <br />    <span style="color: #800080;">$config['allowed_types'] = 'jpg|jpeg|gif|JPG|JPEG|GIF|PNG|png'<span style="color: #000000;">; <br />    <span style="color: #800080;">$config['encrypt_name']=<span style="color: #0000ff;">true<span style="color: #000000;">; <br />    <span style="color: #800080;">$this-&gt;load-&gt;library('upload', <span style="color: #800080;">$config<span style="color: #000000;">); <br />    <span style="color: #800080;">$count=<span style="color: #008080;">count(<span style="color: #800080;">$_FILES["userfile"]["name"]);<span style="color: #008000;">//<span style="color: #008000;">页面取的默认名称 <br />    <span style="color: #800080;">$url_arr=<span style="color: #0000ff;">array<span style="color: #000000;">(); <br />    <span style="color: #0000ff;">for(<span style="color: #800080;">$i=0;<span style="color: #800080;">$i&lt;<span style="color: #800080;">$count;<span style="color: #800080;">$i++<span style="color: #000000;">){<br />        <span style="color: #800080;">$field_name = 'cover' . '_' . <span style="color: #800080;">$i<span style="color: #000000;">; <br />        <span style="color: #800080;">$_FILES[<span style="color: #800080;">$field_name] = <span style="color: #0000ff;">array('name' =&gt; <span style="color: #800080;">$_FILES["userfile"]['name'][<span style="color: #800080;">$i],<br />                                     'size' =&gt; <span style="color: #800080;">$_FILES["userfile"]['size'][<span style="color: #800080;">$i],<br />                                     'type' =&gt; <span style="color: #800080;">$_FILES["userfile"]['type'][<span style="color: #800080;">$i],<br />                                     'tmp_name' =&gt; <span style="color: #800080;">$_FILES["userfile"]['tmp_name'][<span style="color: #800080;">$i],<br />                                     'error' =&gt; <span style="color: #800080;">$_FILES["userfile"]['error'][<span style="color: #800080;">$i<span style="color: #000000;">] );<br />   <span style="color: #0000ff;">if (<span style="color: #800080;">$this-&gt;upload-&gt;do_upload(<span style="color: #800080;">$field_name)) { <span style="color: #008000;">//<span style="color: #008000;">默认名是:userfile <br />       <span style="color: #800080;">$upload_data = <span style="color: #800080;">$this-&gt;upload-&gt;<span style="color: #000000;">data(); <br />       <span style="color: #800080;">$image_url = <span style="color: #0000ff;">array<span style="color: #000000;">(); <br />       <span style="color: #800080;">$image_url['image_url'] = '/misc/upload/profile/'.<span style="color: #800080;">$upload_data['file_name'<span style="color: #000000;">]; <br />       <span style="color: #800080;">$url_arr[] = <span style="color: #800080;">$image_url<span style="color: #000000;">; <br />   }<span style="color: #0000ff;">else<span style="color: #000000;">{ <br />       <span style="color: #0000ff;">echo <span style="color: #800080;">$this-&gt;upload-&gt;<span style="color: #000000;">display_errors(); <br />       <span style="color: #0000ff;">exit(json_encode(<span style="color: #0000ff;">array('code'=&gt;0,'msg'=&gt;'系统错误！'<span style="color: #000000;">))); <br />   } <br />  } <br />  <span style="color: #800080;">$url_arr = array_column(<span style="color: #800080;">$url_arr,'image_url'<span style="color: #000000;">); <br />  <span style="color: #0000ff;">exit(json_encode(<span style="color: #0000ff;">array("code"=&gt;1,"url"=&gt;<span style="color: #800080;">$url_arr<span style="color: #000000;">)));</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>    </span><span style="color: #000000;">

  }<br />}</span></code></pre>

<p>四、效果图如下:</p>
<p><img src="./images/CI框架结合jQuery实现上传多张图片即时显示0.jpg" alt="" /></p>
<p>&nbsp;</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>