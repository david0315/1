<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修《2019年小米春季上海 PHP 实习生招聘面试题》部分答案解析' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>《2019年小米春季上海 PHP 实习生招聘面试题》部分答案解析</center></div><div class='banquan'>原文出处:本文由博客园博主.Ronin提供。<br/>
原文连接:https://www.cnblogs.com/heyue0117/p/12001721.html</div><br>
    <p><strong>1 丶 Nginx 怎么实现负载均衡</strong></p>
<p>这个还是比较简单</p>
<p><strong>1.轮询</strong></p>
<p>这种是默认的策略，把每个请求按顺序逐一分配到不同的 server，如果 server 挂掉，能自动剔除。</p>
<p><img src="./images/《2019年小米春季上海 PHP 实习生招聘面试题》部分答案解析0.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>2.最少连接</strong></p>
<p>把请求分配到连接数最少的 server</p>
<p><img src="./images/《2019年小米春季上海 PHP 实习生招聘面试题》部分答案解析1.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>3.权重</strong></p>
<p>使用 weight 来指定 server 访问比率，weight 默认是 1。以下配置会是 server2 访问的比例是 server1 的两倍。</p>
<p><img src="./images/《2019年小米春季上海 PHP 实习生招聘面试题》部分答案解析2.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>4.ip_hash</strong></p>
<p>每个请求会按照访问 ip 的 hash 值分配，这样同一客户端连续的 Web 请求都会被分发到同一 server 进行处理，可以解决 session 的问题。如果 server 挂掉，能自动剔除。</p>
<p><img src="./images/《2019年小米春季上海 PHP 实习生招聘面试题》部分答案解析3.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>ip_hash 可以和 weight 结合使用。</p>
<p><strong>2 丶 Linux 常用的命令</strong></p>
<p>这个就不多说了</p>
<p><strong>3 丶微信小程序常用的组件</strong></p>
<p>view 丶 text 丶 button 丶 navigator 丶 scroll-view...... 等等</p>
<p><strong>4 丶 Nginx 怎么配置虚拟主机</strong></p>
<p>恩 2333333</p>
<p><strong>5 丶 TP5 和 Laravel 框架差异</strong></p>
<p>恩 2333333</p>
<p><strong>6 丶 TP5 和 Laravel 框架中的数据迁移</strong></p>
<p>这个本社区就有文档的</p>
<p><strong>7 丶 RBAC 模型的讲解</strong></p>
<p>什么是 RBAC</p>
<p>RBAC (基于角色的访问控制)：英文名称 Rose base Access Controller 。本博客介绍这种模型的权限系统设计。取消了用户和权限的直接关联，改为通过用户关联角色、角色关联权限的方法来间接地赋予用户权限。从而实现了解耦。RBAC 在发展过程中分为以下几个版本。RBAC0、RBAC1、RBAC2、RBAC3。</p>
<p><strong>8 丶订单模块的流程</strong></p>
<p><strong>9 丶订单支付成功后的操作</strong></p>
<p><strong>10 丶设置邮箱激活连接过期时间</strong></p>
<p>在把激活码写入数据库的同时写入时间戳 + 过期时间</p>
<p><strong>11 丶 Redis 与 Mongodb 的区别</strong></p>
<p><strong>1.性能</strong></p>
<p>都比较高，性能对我们来说应该都不是瓶颈。</p>
<p>总体来讲，TPS 方面 redis 和 memcache 差不多。</p>
<p><strong>2.操作的便利性</strong></p>
<p>redis 在 2.0 版本后增加了自己的 VM 特性，突破物理内存的限制；可以对 key value 设置过期时间（类似 memcache）。</p>
<p>mongoDB 适合大数据量的存储，依赖操作系统 VM 做内存管理，吃内存也比较厉害，服务不要和别的服务在一起。</p>
<p><strong>4、可用性（单点问题）</strong></p>
<p>对于单点问题：</p>
<p>redis，依赖客户端来实现分布式读写；主从复制时，每次从节点重新连接主节点都要依赖整个快照，无增量复制，因性能和效率问题，所以单点问题比较复杂；不支持自动 sharding, 需要依赖程序设定一致 hash 机制。</p>
<p>一种替代方案是，不用 redis 本身的复制机制，采用自己做主动复制（多份存储），或者改成增量复制的方式（需要自己实现），一致性问题和性能的权衡。</p>
<p>mongoDB 支持 master-slave,replicaset （内部采用 paxos 选举算法，自动故障恢复）,auto sharding 机制，对客户端屏蔽了故障转移和切分机制。</p>
<p><strong>5.可靠性（持久化）</strong></p>
<p>对于数据持久化和数据恢复，redis 支持（快照、AOF）：依赖快照进行持久化，aof 增强了可靠性的同时，对性能有所影响，MongoDB 从 1.8 版本开始采用 binlog 方式支持持久化的可靠性。</p>
<p><strong>6.数据一致性（事务支持）</strong></p>
<p>redis 事务支持比较弱，只能保证事务中的每个操作连续执行，mongoDB 不支持事务。</p>
<p><strong>7.应用场景</strong></p>
<p>redis：数据量较小的更性能操作和运算上</p>
<p>MongoDB: 主要解决海量数据的访问效率问题</p>
<p><strong>12 丶 redis 和 memcached 的区别</strong></p>
<p><strong>13 丶 redis 中的队列</strong></p>
<p><strong>关于 redis 队列的实现方式有两种：</strong></p>
<p><strong>1.生产者消费者模式。</strong></p>
<p>普通版本：</p>
<p>比如一个队列里面，生产者 A push 了一个数据进去，消费者 B pop 了这个数据，那个这个队列依旧为空。所以是一对一的。</p>
<p>至于是先进先出还是先进后出等，可以依照函数 lpush (从队列左边，也就是队首 push 一个数据) rpush (从队列右边也就是队尾 push 一个数据) lpop (同理) rpop 等来控制。</p>
<p>阻塞版本：</p>
<p>但是上面的命令都是立即返回的，无论数据有无，关于取数据 lpop 有个增强版本，blpop (block left pop) 阻塞版本，</p>
<p>使用方法：blpop key1 key2 ... keyn 10</p>
<p>同时预获取多个 key 的值，并设置超时时间为 10s，如果所有 key，有些 key 有 value 就立即返回，如果所有 key 都没有 value 就阻塞 10 秒返回</p>
<p><strong>2.发布者订阅者模式。</strong></p>
<p>概念：</p>
<p>三个用户 A,B,C 同时都订阅了一个 channel 名字叫 msg，然后发布者往 msg 的 channel 里面发布了一个数据，那么 A,B,C 三个用户都会收到该数据。</p>
<p>注意点：</p>
<p>很明显，三个用户 ABC 需要阻塞。怎么收到订阅的数据呢，肯定是依靠注册在 redis 里面的回调函数。</p>
<p>发布的数据不会在 redis 里面复现，意思就是发布了以后，A,B,C 由于种种原因没收到就没收到。</p>
<p><strong>14 丶 redis 中的数据类型</strong></p>
<p>Redis 支持五种数据类型：string（字符串），hash（哈希），list（列表），set（集合）及 zset (sorted set：有序集合)。</p>
<p><strong>15 丶 TP 框架中的事件</strong></p>
<p><strong>16 丶 TP 框架的依赖注入</strong></p>
<p>和 Laravel 没什么区别</p>
<p><strong>17 丶 MySQL 的读写分离操作</strong></p>
<p>什么主从复制，什么 bin log，胡说了一大堆</p>
<p><strong>18 丶数据库 varchar 和 char 的区别</strong></p>
<p>varchar 会回收未使用的空间</p>
<p><strong>19 丶 MyIsam 与 InnoDB 的区别</strong></p>
<p>1、MyISAM：默认表类型，它是基于传统的 ISAM 类型，ISAM 是 Indexed Sequential Access Method (有索引的顺序访问方法) 的缩写，它是存储记录和文件的标准方法。不是事务安全的，而且不支持外键，如果执行大量的 select，insert MyISAM 比较适合。</p>
<p>2、InnoDB：支持事务安全的引擎，支持外键、行锁、事务是他的最大特点。如果有大量的 update 和 insert，建议使用 InnoDB，特别是针对多个并发和 QPS 较高的情况。</p>
<p><strong>一、表锁差异</strong></p>
<p><strong>MyISAM:</strong></p>
<p>myisam 只支持表级锁，用户在操作 myisam 表时，select，update，delete，insert 语句都会给表自动加锁，如果加锁以后的表满足 insert 并发的情况下，可以在表的尾部插入新的数据。也可以通过 lock table 命令来锁表，这样操作主要是可以模仿事务，但是消耗非常大，一般只在实验演示中使用。</p>
<p><strong>InnoDB ：</strong></p>
<p>Innodb 支持事务和行级锁，是 innodb 的最大特色。</p>
<p>事务的 ACID 属性：atomicity,consistent,isolation,durable。</p>
<p>并发事务带来的几个问题：更新丢失，脏读，不可重复读，幻读。</p>
<p><strong>二、数据库文件差异</strong></p>
<p><strong>MyISAM ：</strong></p>
<p>myisam 属于堆表</p>
<p>myisam 在磁盘存储上有三个文件，每个文件名以表名开头，扩展名指出文件类型。</p>
<p>.frm 用于存储表的定义</p>
<p>.MYD 用于存放数据</p>
<p>.MYI 用于存放表索引</p>
<p>myisam 表还支持三种不同的存储格式：</p>
<p>静态表 (默认，但是注意数据末尾不能有空格，会被去掉) 丶动态表丶压缩表。</p>
<p><strong>InnoDB ：</strong></p>
<p>innodb 属于索引组织表</p>
<p>innodb 有两种存储方式，共享表空间存储和多表空间存储</p>
<p>两种存储方式的表结构和 myisam 一样，以表名开头，扩展名是.frm。</p>
<p>如果使用共享表空间，那么所有表的数据文件和索引文件都保存在一个表空间里，一个表空间可以有多个文件，通过 innodb_data_file_path 和 innodb_data_home_dir 参数设置共享表空间的位置和名字，一般共享表空间的名字叫 ibdata1-n。</p>
<p>如果使用多表空间，那么每个表都有一个表空间文件用于存储每个表的数据和索引，文件名以表名开头，以.ibd 为扩展名。</p>
<p><strong>三、索引差异</strong></p>
<p><strong>1.关于自动增长</strong></p>
<p>myisam 引擎的自动增长列必须是索引，如果是组合索引，自动增长可以不是第一列，他可以根据前面几列进行排序后递增。</p>
<p>innodb 引擎的自动增长咧必须是索引，如果是组合索引也必须是组合索引的第一列。</p>
<p><strong>2.关于主键</strong></p>
<p>myisam 允许没有任何索引和主键的表存在，</p>
<p>myisam 的索引都是保存行的地址。</p>
<p>innodb 引擎如果没有设定主键或者非空唯一索引，就会自动生成一个 6 字节的主键 (用户不可见)</p>
<p>innodb 的数据是主索引的一部分，附加索引保存的是主索引的值。</p>
<p><strong>3.关于 count () 函数</strong></p>
<p>myisam 保存有表的总行数，如果 select count(*) from table; 会直接取出出该值</p>
<p>innodb 没有保存表的总行数，如果使用 select count(*) from table; 就会遍历整个表，消耗相当大，但是在加了 where 条件后，myisam 和 innodb 处理的方式都一样。</p>
<p><strong>4.全文索引</strong></p>
<p>myisam 支持 FULLTEXT 类型的全文索引</p>
<p>innodb 不支持 FULLTEXT 类型的全文索引（5.6 开始已经支持了），但是 innodb 可以使用 sphinx 插件支持全文索引，并且效果更好。（sphinx 是一个开源软件，提供多种语言的 API 接口，可以优化 mysql 的各种查询）。</p>
<p><strong>5.delete from table</strong></p>
<p>使用这条命令时，innodb 不会从新建立表，而是一条一条的删除数据，在 innodb 上如果要清空保存有大量数据的表，最 好不要使用这个命令。(推荐使用 truncate table，不过需要用户有 drop 此表的权限)。</p>
<p><strong>6.索引保存位置</strong></p>
<p>myisam 的索引以表名 +.MYI 文件分别保存。</p>
<p>innodb 的索引和数据一起保存在表空间里。</p>
<p><strong>20 丶 MySQL 中的索引有几种</strong></p>
<p><strong>一、普通索引</strong></p>
<p>最基本的索引，只是加快了查询速度。</p>
<p><strong>二、唯一索引</strong></p>
<p>与普通索引类似，不同的是：索引的列值必须唯一，但允许有空值，也就是 null，如果是组合索引，则列值的组合必须是唯一的。</p>
<p><strong>三、主键索引</strong></p>
<p>即我们常用的主键 id, 它是一种特殊的唯一索引，不允许有空值，一般在建表时同时创建主键索引。</p>
<p>特点：</p>
<p>1）一张表只有一个主键索引</p>
<p>2）主键要求自增</p>
<p><strong>四、组合索引</strong></p>
<p>即多个字段建立的索引</p>
<p><strong>五、全文索引</strong></p>
<p>fulltext</p>
<p>myisam 引擎支持</p>
<p><strong>六、外键</strong></p>
<p>建立外键需要注意的事项：</p>
<p>1）表引擎必须一样</p>
<p>2）字段类型必须一样</p>
<p>3）长度必须一样</p>
<p>4）存储范围必须一样</p>
<p>5）约束字段必须在被引用的字段中出现过</p>
<p>以上是文章全部内容，有需要学习交流的友人请加入swoole交流群的咱们一起，有问题一起交流，一起进步！前提是你是学技术的。感谢阅读！</p>
<p><a class=" wrap external" href="https://link.zhihu.com/?target=https%3A//jq.qq.com/%3F_wv%3D1027%26k%3D5mcCu53" rel="nofollow noreferrer" target="_blank" data-za-detail-view-id="1043">点此加入该群</a></p>

</div></div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>