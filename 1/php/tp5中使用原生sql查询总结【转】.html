<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修tp5中使用原生sql查询总结【转】' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>tp5中使用原生sql查询总结【转】</center></div><div class='banquan'>原文出处:本文由博客园博主小猿笔记提供。<br/>
原文连接:https://www.cnblogs.com/KillBugMe/p/11889650.html</div><br>
    <p>注意事项：<br />
1.先在database.php中配置好数据库<br />
2.只要是数据库操作必须引用 use/think/Db;严格区分大小写。<br />
下面是方法：</p>
<pre><code><code> public function hello5()
    {
        //所有查询必须  use/think/Db;
        /* 1 配置数据库
         * 2 使用DB 命名空间
         * 
         */ 
        
        /****************tp5中使用原生语句*******************/
        //query 用于查询 其他的用execute
        
        // 插入记录
//         $result = Db::execute(&#39;insert into sb_ad (ad_name, ad_content ,status) values (1, &quot;456&quot;,1)&#39;);
//         dump($result);   
        // 更新记录
//        $result = Db::execute(&#39;update sb_ad set ad_name = &quot;framework&quot; where ad_id = 1 &#39;);
//        dump($result);        
        // 查询数据
//        $result = Db::query(&#39;select * from sb_ad where ad_id = 1&#39;);
//        print_r($result);
        // 删除数据
//         $result = Db::execute(&#39;delete from sb_ad where ad_id = 2 &#39;);
//         dump($result);     
        //其它操作
        // 显示数据库列表
//        $result = Db::query(&#39;show tables from tpshop1&#39;);
//        print_r($result);
//         清空数据表
//         $result = Db::execute(&#39;TRUNCATE table sb_ad&#39;);
//         dump($result);

        /**************多个数据库操作************/
        //在application/config.php中加入配置
        //例子:
        /*
         * // 数据库配置1
                &#39;db2&#39;   =&gt;  [
                    // 数据库类型
                    &#39;type&#39;     =&gt; &#39;mysql&#39;,
                    // 服务器地址
                    &#39;hostname&#39; =&gt; &#39;127.0.0.1&#39;,
                    // 数据库名
                    &#39;database&#39; =&gt; &#39;tpshop2&#39;,
                    // 数据库用户名
                    &#39;username&#39; =&gt; &#39;root&#39;,
                    // 数据库密码
                    &#39;password&#39; =&gt; &#39;&#39;,
                    // 数据库连接端口
                    &#39;hostport&#39; =&gt; &#39;&#39;,
                    // 数据库连接参数
                    &#39;params&#39;   =&gt; [],
                    // 数据库编码默认采用utf8
                    &#39;charset&#39;  =&gt; &#39;utf8&#39;,
                    // 数据库表前缀
                    &#39;prefix&#39;   =&gt; &#39;tp_&#39;,
                ],
                依次类推
         */
        //connect为链接数据库
//         $result = Db::connect(&#39;db2&#39;)-&gt;query(&#39;select * from sb_ad where ad_id = 1&#39;);
//         print_r($result);

//         $result = Db::connect(&#39;db3&#39;)-&gt;query(&#39;select * from sb_ad where ad_id = 1&#39;);        
//         print_r($result);    
        
//        $db1 = Db::connect(&#39;db1&#39;);获取数据库对象
//        $db2 = Db::connect(&#39;db2&#39;);获取数据库对象然后再操作
//        $db1-&gt;query(&#39;select * from sb_ad where ad_id = 1&#39;);
//        $db2-&gt;query(&#39;select * from sb_ad where ad_id = 1&#39;);
         
        
        /*****参数绑定******/
//        Db::execute(&#39;insert into sb_ad (ad_name, ad_content ,status) values (?, ?, ?)&#39;, [3, &#39;thinkphp&#39;, 1]);
//        $result = Db::query(&#39;select * from sb_ad where ad_id = ?&#39;, [3]);
//        print_r($result);    
       /******命名占位符绑定*****/
//        Db::execute(&#39;insert into sb_ad (ad_name, ad_content ,status) values (:ad_name, :ad_content, :status)&#39;, [&#39;ad_name&#39; =&gt; 11, &#39;ad_content&#39; =&gt; &#39;thinkphp&#39;, &#39;status&#39; =&gt; 1]);
//        $result = Db::query(&#39;select * from sb_ad where ad_id=:id&#39;, [&#39;id&#39; =&gt; 10]);
//        print_r($result);</code></code></pre>
<p>原文链接：<a href="https://www.jianshu.com/p/7d8a91095eca" class="uri">https://www.jianshu.com/p/7d8a91095eca</a></p>


</div></div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>