<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修PHP 实现精确统计在线人数功能' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>PHP 实现精确统计在线人数功能</center></div><div class='banquan'>原文出处:本文由博客园博主.Ronin提供。<br/>
原文连接:https://www.cnblogs.com/heyue0117/p/12017184.html</div><br>
    <p>有需要学习交流的友人请加入交流群的咱们一起，有问题一起交流，一起进步！前提是你是学技术的。感谢阅读！</p>
<h1 class="Post-Title"><span style="font-size: 14px;"><a class="LinkCard LinkCard--noImage" href="https://link.zhihu.com/?target=https%3A//jq.qq.com/%3F_wv%3D1027%26k%3D5mcCu53" target="_blank" data-draft-node="block" data-draft-type="link-card" data-za-detail-view-id="172"><span class="LinkCard-content"><span class="LinkCard-text"><span class="LinkCard-title" data-text="true">点此加入该群<span class="LinkCard-meta">​jq.qq.com</span></span></span></span></a></span></h1>
<p>&nbsp;PHP对session对象的封装的很好，根据HTTP协议，每个范围网站的访客都可以生成一个唯一的标识符</p>
<p><img src="./images/PHP 实现精确统计在线人数功能0.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>这个就是统计在线人数的关键所在，只有有这个session_id 也就可以区分访问的人了。因为每一个人都不同。</p>
<p>接下来，是怎么把session变量里面的值存到数据库里面去，这里有将介绍另一个函数</p>
<p><img src="./images/PHP 实现精确统计在线人数功能1.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>注意，上面有几个函数是有参数传入的，你只要表明有传送传入就是的。PHP在执行代码的时候会自动读取</p>
<p><strong>session中对于的参数</strong></p>
<p>接下来就是完成上面五个函数和一个主函数就可以了</p>
<p><img src="./images/PHP 实现精确统计在线人数功能2.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>主函数就这样完成了.</p>
<p><strong>注意：</strong>凡是将对象的方法作为参数传递都需要使用这种形式：array(对象, "方法名")</p>
<p>接下来就是每个函数的编写</p>
<p><img src="./images/PHP 实现精确统计在线人数功能3.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;关闭数据可以链接的close</p>
<p><img src="./images/PHP 实现精确统计在线人数功能4.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;关键函数要开始了，显示读取函数read(),主要，read()函数是有值传进去的，传入的是session_id</p>
<p><img src="./images/PHP 实现精确统计在线人数功能5.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;第二个是写入函数，如果数据库里面存在的数据，只要更新时间就可以了，新数据写入</p>
<p><img src="./images/PHP 实现精确统计在线人数功能6.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;接下来就是体现PHP回收机制的函数了,两个函数都有参数传入。</p>
<p><img src="./images/PHP 实现精确统计在线人数功能7.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>好了，五个函数都完成了，再就是session表中间读出session的记录条数了。就能准确的统计出正在访问页面的人数。</p>
<p>10分钟没有操作的用户记录将被清空。</p>
<p><strong>精确的通过php实现统计在线人数的方法的代码：</strong></p>
<p><strong><img src="./images/PHP 实现精确统计在线人数功能8.jpg" alt="" /></strong></p>
<p>&nbsp;</p>
<p>&nbsp;<img src="./images/PHP 实现精确统计在线人数功能9.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>

</div></div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>