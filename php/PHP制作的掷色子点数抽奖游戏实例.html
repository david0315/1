<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修PHP制作的掷色子点数抽奖游戏实例' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>PHP制作的掷色子点数抽奖游戏实例</center></div><div class='banquan'>原文出处:本文由博客园博主mrlime提供。<br/>
原文连接:https://www.cnblogs.com/mrlime/p/11875759.html</div><br>
    <p>PHP制作的掷色子点数抽奖游戏实例，通过掷色子点数来达到抽奖的效果，为抽奖活动增添一些趣味性。</p>
<p><img src="./images/PHP制作的掷色子点数抽奖游戏实例0.jpg" alt="" width="628" height="371" /></p>
<p><br />我们将在html页面中写下如下的html结构代码，.wrap用来放置色子和提示信息，#prize则是用来放置奖品的。</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="demo"</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="wrap"</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;"> 3</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="msg"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;"> 4</span>            <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="dice"</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">span </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="dice dice_1"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="dice1"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">span </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="dice dice_6"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="dice2"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">span</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ul </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="prize"</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="d_0"</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">img </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="images/0.gif"</span><span style="color: #ff0000;"> alt</span><span style="color: #0000ff;">="开始"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="d_1"</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">img </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="images/1.gif"</span><span style="color: #ff0000;"> alt</span><span style="color: #0000ff;">="现金100元"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;">10</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="d_2"</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">img </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="images/2.gif"</span><span style="color: #ff0000;"> alt</span><span style="color: #0000ff;">="泰迪熊宝宝"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;">11</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="d_3"</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">img </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="images/7.gif"</span><span style="color: #ff0000;"> alt</span><span style="color: #0000ff;">="谢谢参与"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;">12</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="d_4"</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">img </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="images/3.gif"</span><span style="color: #ff0000;"> alt</span><span style="color: #0000ff;">="iphone 5s"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;">13</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="d_5"</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">img </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="images/4.gif"</span><span style="color: #ff0000;"> alt</span><span style="color: #0000ff;">="笔记本电脑"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;">14</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="d_6"</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">img </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="images/7.gif"</span><span style="color: #ff0000;"> alt</span><span style="color: #0000ff;">="谢谢参与"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;">15</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="d_7"</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">img </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="images/5.gif"</span><span style="color: #ff0000;"> alt</span><span style="color: #0000ff;">="单反相机"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;">16</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="d_8"</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">img </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="images/6.gif"</span><span style="color: #ff0000;"> alt</span><span style="color: #0000ff;">="轿车"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;">17</span>         <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">li </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="d_9"</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">img </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="images/7.gif"</span><span style="color: #ff0000;"> alt</span><span style="color: #0000ff;">="谢谢参与"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">li</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;">18</span>     <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ul</span><span style="color: #0000ff;">&gt;</span>  
<span style="color: #008080;">19</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span></code></pre>

<p><br />我们使用jQuery来完成前端动作，包括掷色子动画，奖品逐步运动动画，其中有防重复点击知识、ajax交互知识，动画提示知识。整个操作流程可简单概括为：点击色子-&gt;向dice.php发送ajax请求-&gt;完成掷色子动画-&gt;提示点数-&gt;逐步运动动画到最终奖品位置停止-&gt;完成抽奖。</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> $(<span style="color: #0000ff;">function</span><span style="color: #000000;">(){  
</span><span style="color: #008080;"> 2</span>     $("#dice").click(<span style="color: #0000ff;">function</span><span style="color: #000000;">(){  
</span><span style="color: #008080;"> 3</span>         $("#prize li .mask"<span style="color: #000000;">).remove();  
</span><span style="color: #008080;"> 4</span>         $(".wrap").append("&lt;div id='dice_mask'&gt;&lt;/div&gt;");<span style="color: #008000;">//</span><span style="color: #008000;">加遮罩  </span>
<span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">var</span> dice1 = $("#dice1"<span style="color: #000000;">);  
</span><span style="color: #008080;"> 6</span>         <span style="color: #0000ff;">var</span> dice2 = $("#dice2"<span style="color: #000000;">);  
</span><span style="color: #008080;"> 7</span>         $.getJSON("dice.php",<span style="color: #0000ff;">function</span><span style="color: #000000;">(json){  
</span><span style="color: #008080;"> 8</span>             <span style="color: #0000ff;">var</span> num1 = json[0<span style="color: #000000;">];  
</span><span style="color: #008080;"> 9</span>             <span style="color: #0000ff;">var</span> num2 = json[1<span style="color: #000000;">];  
</span><span style="color: #008080;">10</span>             diceroll(dice1,num1);<span style="color: #008000;">//</span><span style="color: #008000;">掷色子1动画  </span>
<span style="color: #008080;">11</span>             diceroll(dice2,num2);<span style="color: #008000;">//</span><span style="color: #008000;">掷色子2动画  </span>
<span style="color: #008080;">12</span>             <span style="color: #0000ff;">var</span> num = parseInt(num1)+<span style="color: #000000;">parseInt(num2);  
</span><span style="color: #008080;">13</span>             $("#msg").css("top","-10px").fadeIn(500).text(num+'点').animate({top:'-50px'},'1000').fadeOut(500<span style="color: #000000;">);  
</span><span style="color: #008080;">14</span>             roll(0, num);<span style="color: #008000;">//</span><span style="color: #008000;">逐步运动动画  </span>
<span style="color: #008080;">15</span> <span style="color: #000000;">        });  
</span><span style="color: #008080;">16</span> <span style="color: #000000;">    });  
</span><span style="color: #008080;">17</span> });</code></pre>

<p><br />dice.php文件代码：根据配置好的奖品概率，得到总点数，根据总点数进行两粒色子的点数分配，最后返回给前端页面两粒色子的点数</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> $(<span style="color: #0000ff;">function</span><span style="color: #000000;">(){  
</span><span style="color: #008080;"> 2</span>     $("#dice").click(<span style="color: #0000ff;">function</span><span style="color: #000000;">(){  
</span><span style="color: #008080;"> 3</span>         $("#prize li .mask").<span style="color: #000000;">remove();  
</span><span style="color: #008080;"> 4</span>         $(".wrap").append("&lt;div id='dice_mask'&gt;&lt;/div&gt;");<span style="color: #008000;">//</span><span style="color: #008000;">加遮罩  </span>
<span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">var</span> dice1 = $("#dice1"<span style="color: #000000;">);  
</span><span style="color: #008080;"> 6</span>         <span style="color: #0000ff;">var</span> dice2 = $("#dice2"<span style="color: #000000;">);  
</span><span style="color: #008080;"> 7</span>         $.getJSON("dice.php",<span style="color: #0000ff;">function</span><span style="color: #000000;">(json){  
</span><span style="color: #008080;"> 8</span>             <span style="color: #0000ff;">var</span> num1 = json[0<span style="color: #000000;">];  
</span><span style="color: #008080;"> 9</span>             <span style="color: #0000ff;">var</span> num2 = json[1<span style="color: #000000;">];  
</span><span style="color: #008080;">10</span>             diceroll(dice1,num1);<span style="color: #008000;">//</span><span style="color: #008000;">掷色子1动画  </span>
<span style="color: #008080;">11</span>             diceroll(dice2,num2);<span style="color: #008000;">//</span><span style="color: #008000;">掷色子2动画  </span>
<span style="color: #008080;">12</span>             <span style="color: #0000ff;">var</span> num = parseInt(num1)+<span style="color: #000000;">parseInt(num2);  
</span><span style="color: #008080;">13</span>             $("#msg").css("top","-10px").fadeIn(500).text(num+'点').animate({top:'-50px'},'1000').fadeOut(500<span style="color: #000000;">);  
</span><span style="color: #008080;">14</span>             roll(0, num);<span style="color: #008000;">//</span><span style="color: #008000;">逐步运动动画  </span>
<span style="color: #008080;">15</span> <span style="color: #000000;">        });  
</span><span style="color: #008080;">16</span> <span style="color: #000000;">    });  
</span><span style="color: #008080;">17</span> <span style="color: #000000;">});
</span><span style="color: #008080;">18</span> dice.<span style="color: #000000;">php
</span><span style="color: #008080;">19</span> <span style="color: #000000;">根据配置好的奖品概率，得到总点数，根据总点数进行两粒色子的点数分配，最后返回给前端页面两粒色子的点数
</span><span style="color: #008080;">20</span> 
<span style="color: #008080;">21</span> <span style="color: #008000;">//</span><span style="color: #008000;">设置中奖概率  </span>
<span style="color: #008080;">22</span> <span style="color: #800080;">$prize_arr</span> = <span style="color: #0000ff;">array</span><span style="color: #000000;">(  
</span><span style="color: #008080;">23</span>     '2' =&gt; <span style="color: #0000ff;">array</span>('id'=&gt;2,'v'=&gt;10),  
<span style="color: #008080;">24</span>     '3' =&gt; <span style="color: #0000ff;">array</span>('id'=&gt;3,'v'=&gt;20),  
<span style="color: #008080;">25</span>     '4' =&gt; <span style="color: #0000ff;">array</span>('id'=&gt;4,'v'=&gt;5),  
<span style="color: #008080;">26</span>     '5' =&gt; <span style="color: #0000ff;">array</span>('id'=&gt;5,'v'=&gt;5),  
<span style="color: #008080;">27</span>     '6' =&gt; <span style="color: #0000ff;">array</span>('id'=&gt;6,'v'=&gt;20),  
<span style="color: #008080;">28</span>     '7' =&gt; <span style="color: #0000ff;">array</span>('id'=&gt;7,'v'=&gt;2),  
<span style="color: #008080;">29</span>     '8' =&gt; <span style="color: #0000ff;">array</span>('id'=&gt;8,'v'=&gt;3),  
<span style="color: #008080;">30</span>     '9' =&gt; <span style="color: #0000ff;">array</span>('id'=&gt;9,'v'=&gt;20),  
<span style="color: #008080;">31</span>     '10' =&gt; <span style="color: #0000ff;">array</span>('id'=&gt;10,'v'=&gt;0),  
<span style="color: #008080;">32</span>     '11' =&gt; <span style="color: #0000ff;">array</span>('id'=&gt;11,'v'=&gt;10),  
<span style="color: #008080;">33</span>     '12' =&gt; <span style="color: #0000ff;">array</span>('id'=&gt;12,'v'=&gt;5),  
<span style="color: #008080;">34</span> <span style="color: #000000;">);  
</span><span style="color: #008080;">35</span>   
<span style="color: #008080;">36</span> <span style="color: #0000ff;">foreach</span> (<span style="color: #800080;">$prize_arr</span> <span style="color: #0000ff;">as</span> <span style="color: #800080;">$key</span> =&gt; <span style="color: #800080;">$val</span><span style="color: #000000;">) {  
</span><span style="color: #008080;">37</span>     <span style="color: #800080;">$arr</span>[<span style="color: #800080;">$val</span>['id']] = <span style="color: #800080;">$val</span>['v'<span style="color: #000000;">];  
</span><span style="color: #008080;">38</span> <span style="color: #000000;">}  
</span><span style="color: #008080;">39</span>   
<span style="color: #008080;">40</span> <span style="color: #800080;">$sum</span> = getRand(<span style="color: #800080;">$arr</span>); <span style="color: #008000;">//</span><span style="color: #008000;">根据概率获取奖项id，得到总点数  
</span><span style="color: #008080;">41</span>   
<span style="color: #008080;">42</span> <span style="color: #008000;">//分配色子点数  </span>
<span style="color: #008080;">43</span> <span style="color: #800080;">$arrs</span> = <span style="color: #0000ff;">array</span><span style="color: #000000;">(  
</span><span style="color: #008080;">44</span>     '2' =&gt; <span style="color: #0000ff;">array</span>(<span style="color: #0000ff;">array</span>(1,1)),  
<span style="color: #008080;">45</span>     '3' =&gt; <span style="color: #0000ff;">array</span>(<span style="color: #0000ff;">array</span>(1,2)),  
<span style="color: #008080;">46</span>     '4' =&gt; <span style="color: #0000ff;">array</span>(<span style="color: #0000ff;">array</span>(1,3),<span style="color: #0000ff;">array</span>(2,2)),  
<span style="color: #008080;">47</span>     '5' =&gt; <span style="color: #0000ff;">array</span>(<span style="color: #0000ff;">array</span>(1,4),<span style="color: #0000ff;">array</span>(2,3)),  
<span style="color: #008080;">48</span>     '6' =&gt; <span style="color: #0000ff;">array</span>(<span style="color: #0000ff;">array</span>(1,5),<span style="color: #0000ff;">array</span>(2,4),<span style="color: #0000ff;">array</span>(3,3)),  
<span style="color: #008080;">49</span>     '7' =&gt; <span style="color: #0000ff;">array</span>(<span style="color: #0000ff;">array</span>(1,6),<span style="color: #0000ff;">array</span>(2,7),<span style="color: #0000ff;">array</span>(3,4)),  
<span style="color: #008080;">50</span>     '8' =&gt; <span style="color: #0000ff;">array</span>(<span style="color: #0000ff;">array</span>(2,6),<span style="color: #0000ff;">array</span>(3,5),<span style="color: #0000ff;">array</span>(4,4)),  
<span style="color: #008080;">51</span>     '9' =&gt; <span style="color: #0000ff;">array</span>(<span style="color: #0000ff;">array</span>(3,6),<span style="color: #0000ff;">array</span>(4,5)),  
<span style="color: #008080;">52</span>     '10' =&gt; <span style="color: #0000ff;">array</span>(<span style="color: #0000ff;">array</span>(4,6),<span style="color: #0000ff;">array</span>(5,5)),  
<span style="color: #008080;">53</span>     '11' =&gt; <span style="color: #0000ff;">array</span>(<span style="color: #0000ff;">array</span>(5,6)),  
<span style="color: #008080;">54</span>     '12' =&gt; <span style="color: #0000ff;">array</span>(<span style="color: #0000ff;">array</span>(6,6<span style="color: #000000;">))  
</span><span style="color: #008080;">55</span> <span style="color: #000000;">);  
</span><span style="color: #008080;">56</span>   
<span style="color: #008080;">57</span> <span style="color: #800080;">$arr_rs</span> = <span style="color: #800080;">$arrs</span>[<span style="color: #800080;">$sum</span><span style="color: #000000;">];  
</span><span style="color: #008080;">58</span> <span style="color: #800080;">$i</span> = <span style="color: #008080;">array_rand</span>(<span style="color: #800080;">$arr_rs</span>);<span style="color: #008000;">//</span><span style="color: #008000;">随机取数组  </span>
<span style="color: #008080;">59</span> <span style="color: #800080;">$arr_a</span> = <span style="color: #800080;">$arr_rs</span>[<span style="color: #800080;">$i</span><span style="color: #000000;">];  
</span><span style="color: #008080;">60</span> <span style="color: #008080;">shuffle</span>(<span style="color: #800080;">$arr_a</span>);<span style="color: #008000;">//</span><span style="color: #008000;">打乱顺序  </span>
<span style="color: #008080;">61</span> <span style="color: #0000ff;">echo</span> json_encode(<span style="color: #800080;">$arr_a</span>);</code></pre>

<p><br />本文转自：<a href="https://www.sucaihuo.com/php/157.html" target="_blank">https://www.sucaihuo.com/php/157.html</a> 转载请注明出处！</p>

</div></div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>