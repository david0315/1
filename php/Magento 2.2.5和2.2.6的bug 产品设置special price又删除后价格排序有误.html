<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Magento 2.2.5和2.2.6的bug 产品设置special price又删除后价格排序有误' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Magento 2.2.5和2.2.6的bug 产品设置special price又删除后价格排序有误</center></div><div class='banquan'>原文出处:本文由博客园博主胖成大海提供。<br/>
原文连接:https://www.cnblogs.com/fire-wood/p/10649220.html</div><br>
    <p>Magento 2.2.5和2.2.6的bug 产品设置special price又删除后价格排序有误</p>
<p><strong>一、问题描述：</strong>版本2.2.5和2.2.6均有此问题，为Magento2的系统bug。为产品设置special price，比如0.5元，这个产品按价格由低到高排序时，排在首位；然后删去special price，保存，重建索引后，此产品显示的价格是正确的，但是即使有显示的价格比它还低的，按价格排序这个产品依然排在首位。</p>
<p><strong>二、问题定位：</strong><br />1、价格排序有问题，肯定是数据保存有问题。先在数据库里找与价格有关的数据表，catalog_product_index_price 和 catalog_category_entity_decimal 放在一起看，发现有问题的产品中，final_price max_price min_price的值都为0，改为和price的值一样时，价格排序正确。有此确定有问题的表出在 catalog_product_index_price。</p>
<p>2、确定产品保存时 catalog_product_index_price 这张表的final price的值为什么会被保存为0。产品保存与 vendor/magento/module-catalog/Controller/Adminhtml/Product/Save.php 这个文件有关，断点调试未能发现保存 catalog_product_index_price 的操作。后经同事提醒，产品保存后会进行 reindex 的操作，简单测试发现 catalog_product_index_price 表确实是 reindex 时保存。</p>
<p>3、reindex时，断点调试获取最终插入数据表的 SQL语句。只要分析SQL语句，就能确定问题的来源。reindex的起始点在文件 vendor/magento/module-indexer/Console/Command/IndexerReindexCommand.php，但是indexer有很多，要准确找到价格的reindex操作，需要花费很大的努力和耐心。最终找到文件 vendor/magento/module-catalog/Model/ResourceModel/Product/Indexer/Price/SimpleProductPrice.php ，从中可以获取插入临时表的SQL语句 $query 变量，复制SQL语句，放到Navicat中执行，可以发现要插入的数据中，final_price为0，下面主要分析这个SQL语句。</p>
<p>4、如下面展示的SQL语句所示，这个语句很长而且很复杂，要分析清楚它内部的逻辑结构，一是没有相应的分析复杂SQL语句的经验而很是犯难，二是非常耗费时间。后经同事演示和提醒，发现分析这个SQL语句也没有想象中那么难，因为再复杂的语句都是由基本语句组合而成，不过其中加上了多层嵌套，if语句的判断让它看起来非常复杂罢了，基本的分析方法还是：&ldquo;分而治之，各个击破&rdquo;，这句中国的成语包含了丰富的哲理智慧，我发现现实生活中的问题都可以用这套理论去解决。下面详细说明如何&ldquo;分而治之&rdquo;，又如何&ldquo;各个击破&rdquo;。<br />分而治之，就是把这段SQL语句中无关的东西撇去，只关注核心的数据。final_price有问题，我们就看它的final_price是怎么查出来的，看黄色背景的部分。它最外面是一层IFNULL判断，它的意思是第一个参数如果为真，那么返回它本身，否则返回第二个参数，final_price现在为0，那么就可以判断，第一个参数一定为FALSE。但是第一个参数是很长一大段，我们又来仔细分析它，因为嵌套很多，不容易看清楚，我们这时要引入外面的工具，把它格式化，层次结构分明一点，并且可以看到括弧的开头和结束。PHPStorm是一个很好用的工具，把这段代码都复制进去，并且格式化后再来分析。<br />各个击破，因为代码中涉及到值的对比和运算，所以我们要学会将这些不同的值打印显示出来，算出来后一个个拿来进行比较分析。打印（查询）出来也不难，模仿它本身就好了，用IFNULL或IF语句，就可以查询出来。</p>
<p>5、经过上面的分析，最终确定，问题出在一个叫 special_from_date 的产品属性上。当保存special_price 时，会将这个属性的值也保存起来，但是删除 special_price 时却没有删除，遗留的数据会影响上面SQL语句的判断，从而导致final_price的值变为0。</p>
<p>6、定位了问题所在后，就是最终的解决。覆写 vendor/magento/module-catalog/Observer/SetSpecialPriceStartDate.php 文件的 execute方法，改为如下。它的作用就是，当有 special_price时，就保存special_from_date,没有special_price时，就删除speical_from_date。更新代码后，问题解决。</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #008000;">/*</span><span style="color: #008000;">*
</span><span style="color: #008080;"> 2</span> <span style="color: #008000;">* Set the current date to Special Price From attribute if it empty
</span><span style="color: #008080;"> 3</span> <span style="color: #008000;">*
</span><span style="color: #008080;"> 4</span> <span style="color: #008000;">* If special price was deleted, Special Price From attribute will be deleted
</span><span style="color: #008080;"> 5</span> <span style="color: #008000;">*
</span><span style="color: #008080;"> 6</span> <span style="color: #008000;">* (Important! Otherwise indexer would be confused)
</span><span style="color: #008080;"> 7</span> <span style="color: #008000;">*
</span><span style="color: #008080;"> 8</span> <span style="color: #008000;">* @param \Magento\Framework\Event\Observer $observer
</span><span style="color: #008080;"> 9</span> <span style="color: #008000;">* @return $this
</span><span style="color: #008080;">10</span> <span style="color: #008000;">*/</span>
<span style="color: #008080;">11</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">function</span> execute(\Magento\Framework\Event\Observer <span style="color: #800080;">$observer</span><span style="color: #000000;">)
</span><span style="color: #008080;">12</span> <span style="color: #000000;">{
</span><span style="color: #008080;">13</span> 　　<span style="color: #008000;">/*</span><span style="color: #008000;">* @var $product \Magento\Catalog\Model\Product </span><span style="color: #008000;">*/</span>
<span style="color: #008080;">14</span> 　　<span style="color: #800080;">$product</span> = <span style="color: #800080;">$observer</span>-&gt;getEvent()-&gt;<span style="color: #000000;">getProduct();
</span><span style="color: #008080;">15</span> 　　<span style="color: #0000ff;">if</span> (<span style="color: #800080;">$product</span>-&gt;getSpecialPrice() &amp;&amp; !<span style="color: #800080;">$product</span>-&gt;<span style="color: #000000;">getSpecialFromDate()) {
</span><span style="color: #008080;">16</span> 　　　　<span style="color: #800080;">$product</span>-&gt;setData('special_from_date', <span style="color: #800080;">$this</span>-&gt;localeDate-&gt;<span style="color: #008080;">date</span><span style="color: #000000;">());
</span><span style="color: #008080;">17</span> 　　} <span style="color: #0000ff;">elseif</span> (!<span style="color: #800080;">$product</span>-&gt;getSpecialPrice() &amp;&amp; <span style="color: #800080;">$product</span>-&gt;<span style="color: #000000;">getSpecialFromDate()) {
</span><span style="color: #008080;">18</span> 　　　　<span style="color: #800080;">$product</span>-&gt;unsetData('special_from_date'<span style="color: #000000;">);
</span><span style="color: #008080;">19</span> 　　<span style="color: #000000;">}
</span><span style="color: #008080;">20</span> 
<span style="color: #008080;">21</span> 　　<span style="color: #0000ff;">return</span> <span style="color: #800080;">$this</span><span style="color: #000000;">;
</span><span style="color: #008080;">22</span> }</code></pre>

<p>&nbsp;</p>
<p><strong>三、总结：</strong>经此，定位问题，解决问题的能力又获得一丁点的提升。主要是学会了对复杂SQL语句的初步分析，知道了IFNULL、IF、LEAST函数的使用，AND比OR的优先级要高的事实。</p>
<p><br />SQL语句：</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">INSERT</span> <span style="color: #0000ff;">INTO</span> `catalog_product_index_price_temp` <span style="color: #0000ff;">SELECT</span> `e`.`entity_id`, `cg`.`customer_group_id`, `pw`.`website_id`, <span style="color: #0000ff;">IF</span>(IFNULL(tas_tax_class_id.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_tax_class_id.value, tad_tax_class_id.value) <span style="color: #0000ff;">AS</span> `tax_class_id`, IFNULL((ta_price.value), <span style="color: #800000; font-weight: bold;">0</span>) <span style="color: #0000ff;">AS</span> `price`, IFNULL((LEAST(ta_price.value, <span style="color: #0000ff;">IF</span>(ta_special_price.value <span style="color: #0000ff;">IS</span> <span style="color: #808080;">NOT</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> <span style="color: #0000ff;">IF</span>(IFNULL(tas_special_from_date.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_special_from_date.value, tad_special_from_date.value) <span style="color: #0000ff;">IS</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">OR</span> DATE(<span style="color: #0000ff;">IF</span>(IFNULL(tas_special_from_date.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_special_from_date.value, tad_special_from_date.value)) <span style="color: #808080;">&lt;=</span> cwd.website_date <span style="color: #808080;">AND</span> <span style="color: #0000ff;">IF</span>(IFNULL(tas_special_to_date.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_special_to_date.value, tad_special_to_date.value) <span style="color: #0000ff;">IS</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">OR</span> DATE(<span style="color: #0000ff;">IF</span>(IFNULL(tas_special_to_date.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_special_to_date.value, tad_special_to_date.value)) <span style="color: #808080;">&gt;=</span> cwd.website_date, ta_special_price.value, <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_1.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> tier_price_2.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> tier_price_3.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> tier_price_4.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span>, <span style="color: #0000ff;">NULL</span>, LEAST(IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_1.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_1.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_1.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_2.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_2.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_2.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_3.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_3.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_3.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_4.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_4.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_4.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>)))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>))), <span style="color: #800000; font-weight: bold;">0</span>) <span style="color: #0000ff;">AS</span> `final_price`, IFNULL((LEAST(ta_price.value, <span style="color: #0000ff;">IF</span>(ta_special_price.value <span style="color: #0000ff;">IS</span> <span style="color: #808080;">NOT</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> <span style="color: #0000ff;">IF</span>(IFNULL(tas_special_from_date.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_special_from_date.value, tad_special_from_date.value) <span style="color: #0000ff;">IS</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">OR</span> DATE(<span style="color: #0000ff;">IF</span>(IFNULL(tas_special_from_date.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_special_from_date.value, tad_special_from_date.value)) <span style="color: #808080;">&lt;=</span> cwd.website_date <span style="color: #808080;">AND</span> <span style="color: #0000ff;">IF</span>(IFNULL(tas_special_to_date.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_special_to_date.value, tad_special_to_date.value) <span style="color: #0000ff;">IS</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">OR</span> DATE(<span style="color: #0000ff;">IF</span>(IFNULL(tas_special_to_date.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_special_to_date.value, tad_special_to_date.value)) <span style="color: #808080;">&gt;=</span> cwd.website_date, ta_special_price.value, <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_1.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> tier_price_2.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> tier_price_3.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> tier_price_4.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span>, <span style="color: #0000ff;">NULL</span>, LEAST(IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_1.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_1.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_1.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_2.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_2.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_2.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_3.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_3.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_3.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_4.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_4.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_4.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>)))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>))), <span style="color: #800000; font-weight: bold;">0</span>) <span style="color: #0000ff;">AS</span> `min_price`, IFNULL((LEAST(ta_price.value, <span style="color: #0000ff;">IF</span>(ta_special_price.value <span style="color: #0000ff;">IS</span> <span style="color: #808080;">NOT</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> <span style="color: #0000ff;">IF</span>(IFNULL(tas_special_from_date.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_special_from_date.value, tad_special_from_date.value) <span style="color: #0000ff;">IS</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">OR</span> DATE(<span style="color: #0000ff;">IF</span>(IFNULL(tas_special_from_date.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_special_from_date.value, tad_special_from_date.value)) <span style="color: #808080;">&lt;=</span> cwd.website_date <span style="color: #808080;">AND</span> <span style="color: #0000ff;">IF</span>(IFNULL(tas_special_to_date.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_special_to_date.value, tad_special_to_date.value) <span style="color: #0000ff;">IS</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">OR</span> DATE(<span style="color: #0000ff;">IF</span>(IFNULL(tas_special_to_date.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_special_to_date.value, tad_special_to_date.value)) <span style="color: #808080;">&gt;=</span> cwd.website_date, ta_special_price.value, <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_1.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> tier_price_2.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> tier_price_3.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> tier_price_4.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span>, <span style="color: #0000ff;">NULL</span>, LEAST(IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_1.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_1.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_1.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_2.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_2.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_2.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_3.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_3.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_3.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_4.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_4.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_4.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>)))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>))), <span style="color: #800000; font-weight: bold;">0</span>) <span style="color: #0000ff;">AS</span> `max_price`, <span style="color: #0000ff;">IF</span>(tier_price_1.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> tier_price_2.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> tier_price_3.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">AND</span> tier_price_4.value_id <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">NULL</span>, <span style="color: #0000ff;">NULL</span>, LEAST(IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_1.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_1.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_1.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_2.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_2.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_2.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_3.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_3.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_3.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>), IFNULL((<span style="color: #0000ff;">IF</span>(tier_price_4.value <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>, <span style="color: #ff00ff;">ROUND</span>(ta_price.value <span style="color: #808080;">*</span> (<span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">-</span> <span style="color: #ff00ff;">ROUND</span>(tier_price_4.percentage_value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>) <span style="color: #808080;">/</span> <span style="color: #800000; font-weight: bold;">100</span>), <span style="color: #800000; font-weight: bold;">4</span>), <span style="color: #ff00ff;">ROUND</span>(tier_price_4.value <span style="color: #808080;">*</span> cwd.rate, <span style="color: #800000; font-weight: bold;">4</span>))), <span style="color: #808080;">~</span><span style="color: #800000; font-weight: bold;">0</span>))) <span style="color: #0000ff;">AS</span> `tier_price` <span style="color: #0000ff;">FROM</span> `catalog_product_entity` <span style="color: #0000ff;">AS</span><span style="color: #000000;"> `e`
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">CROSS</span> <span style="color: #808080;">JOIN</span> `customer_group` <span style="color: #0000ff;">AS</span><span style="color: #000000;"> `cg`
</span><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">INNER</span> <span style="color: #808080;">JOIN</span> `catalog_product_website` <span style="color: #0000ff;">AS</span> `pw` <span style="color: #0000ff;">ON</span> pw.product_id <span style="color: #808080;">=</span><span style="color: #000000;"> e.entity_id
</span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">INNER</span> <span style="color: #808080;">JOIN</span> `catalog_product_index_website` <span style="color: #0000ff;">AS</span> `cwd` <span style="color: #0000ff;">ON</span> pw.website_id <span style="color: #808080;">=</span><span style="color: #000000;"> cwd.website_id
</span><span style="color: #008080;"> 5</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_index_tier_price` <span style="color: #0000ff;">AS</span> `tp` <span style="color: #0000ff;">ON</span> tp.entity_id <span style="color: #808080;">=</span> e.entity_id <span style="color: #808080;">AND</span> tp.customer_group_id <span style="color: #808080;">=</span> cg.customer_group_id <span style="color: #808080;">AND</span> tp.website_id <span style="color: #808080;">=</span><span style="color: #000000;"> pw.website_id
</span><span style="color: #008080;"> 6</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_tier_price` <span style="color: #0000ff;">AS</span> `tier_price_1` <span style="color: #0000ff;">ON</span> tier_price_1.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> tier_price_1.all_groups <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span> <span style="color: #808080;">AND</span> tier_price_1.customer_group_id <span style="color: #808080;">=</span> cg.customer_group_id <span style="color: #808080;">AND</span> tier_price_1.qty <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">AND</span> tier_price_1.website_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>
<span style="color: #008080;"> 7</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_tier_price` <span style="color: #0000ff;">AS</span> `tier_price_2` <span style="color: #0000ff;">ON</span> tier_price_2.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> tier_price_2.all_groups <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span> <span style="color: #808080;">AND</span> tier_price_2.customer_group_id <span style="color: #808080;">=</span> cg.customer_group_id <span style="color: #808080;">AND</span> tier_price_2.qty <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">AND</span> tier_price_2.website_id <span style="color: #808080;">=</span><span style="color: #000000;"> pw.website_id
</span><span style="color: #008080;"> 8</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_tier_price` <span style="color: #0000ff;">AS</span> `tier_price_3` <span style="color: #0000ff;">ON</span> tier_price_3.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> tier_price_3.all_groups <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">AND</span> tier_price_3.customer_group_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span> <span style="color: #808080;">AND</span> tier_price_3.qty <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">AND</span> tier_price_3.website_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>
<span style="color: #008080;"> 9</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_tier_price` <span style="color: #0000ff;">AS</span> `tier_price_4` <span style="color: #0000ff;">ON</span> tier_price_4.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> tier_price_4.all_groups <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">AND</span> tier_price_4.customer_group_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span> <span style="color: #808080;">AND</span> tier_price_4.qty <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">AND</span> tier_price_4.website_id <span style="color: #808080;">=</span><span style="color: #000000;"> pw.website_id
</span><span style="color: #008080;">10</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_int` <span style="color: #0000ff;">AS</span> `tad_tax_class_id` <span style="color: #0000ff;">ON</span> tad_tax_class_id.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> tad_tax_class_id.attribute_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">149</span> <span style="color: #808080;">AND</span> tad_tax_class_id.store_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>
<span style="color: #008080;">11</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_int` <span style="color: #0000ff;">AS</span> `tas_tax_class_id` <span style="color: #0000ff;">ON</span> tas_tax_class_id.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> tas_tax_class_id.attribute_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">149</span> <span style="color: #808080;">AND</span> tas_tax_class_id.store_id <span style="color: #808080;">=</span><span style="color: #000000;"> cwd.default_store_id
</span><span style="color: #008080;">12</span> <span style="color: #0000ff;">INNER</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_int` <span style="color: #0000ff;">AS</span> `tad_status` <span style="color: #0000ff;">ON</span> tad_status.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> tad_status.attribute_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">97</span> <span style="color: #808080;">AND</span> tad_status.store_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>
<span style="color: #008080;">13</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_int` <span style="color: #0000ff;">AS</span> `tas_status` <span style="color: #0000ff;">ON</span> tas_status.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> tas_status.attribute_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">97</span> <span style="color: #808080;">AND</span> tas_status.store_id <span style="color: #808080;">=</span><span style="color: #000000;"> cwd.default_store_id
</span><span style="color: #008080;">14</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_decimal` <span style="color: #0000ff;">AS</span> `ta_price` <span style="color: #0000ff;">ON</span> ta_price.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> ta_price.attribute_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">77</span> <span style="color: #808080;">AND</span> ta_price.store_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>
<span style="color: #008080;">15</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_decimal` <span style="color: #0000ff;">AS</span> `ta_special_price` <span style="color: #0000ff;">ON</span> ta_special_price.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> ta_special_price.attribute_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">78</span> <span style="color: #808080;">AND</span> ta_special_price.store_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>
<span style="color: #008080;">16</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_datetime` <span style="color: #0000ff;">AS</span> `tad_special_from_date` <span style="color: #0000ff;">ON</span> tad_special_from_date.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> tad_special_from_date.attribute_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">79</span> <span style="color: #808080;">AND</span> tad_special_from_date.store_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>
<span style="color: #008080;">17</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_datetime` <span style="color: #0000ff;">AS</span> `tas_special_from_date` <span style="color: #0000ff;">ON</span> tas_special_from_date.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> tas_special_from_date.attribute_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">79</span> <span style="color: #808080;">AND</span> tas_special_from_date.store_id <span style="color: #808080;">=</span><span style="color: #000000;"> cwd.default_store_id
</span><span style="color: #008080;">18</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_datetime` <span style="color: #0000ff;">AS</span> `tad_special_to_date` <span style="color: #0000ff;">ON</span> tad_special_to_date.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> tad_special_to_date.attribute_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">80</span> <span style="color: #808080;">AND</span> tad_special_to_date.store_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">0</span>
<span style="color: #008080;">19</span> <span style="color: #808080;">LEFT</span> <span style="color: #808080;">JOIN</span> `catalog_product_entity_datetime` <span style="color: #0000ff;">AS</span> `tas_special_to_date` <span style="color: #0000ff;">ON</span> tas_special_to_date.row_id <span style="color: #808080;">=</span> e.row_id <span style="color: #808080;">AND</span> tas_special_to_date.attribute_id <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">80</span> <span style="color: #808080;">AND</span> tas_special_to_date.store_id <span style="color: #808080;">=</span> cwd.default_store_id <span style="color: #0000ff;">WHERE</span> ((<span style="color: #0000ff;">IF</span>(IFNULL(tas_status.value_id, <span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">0</span>, tas_status.value, tad_status.value) <span style="color: #808080;">=</span> <span style="color: #800000; font-weight: bold;">1</span>) <span style="color: #808080;">AND</span> (e.type_id <span style="color: #808080;">=</span> <span style="color: #ff0000;">'</span><span style="color: #ff0000;">simple</span><span style="color: #ff0000;">'</span>) <span style="color: #808080;">AND</span> (e.entity_id <span style="color: #808080;">BETWEEN</span> <span style="color: #800000; font-weight: bold;">2</span> <span style="color: #808080;">AND</span> <span style="color: #800000; font-weight: bold;">21</span>)) <span style="color: #808080;">AND</span> (e.created_in <span style="color: #808080;">&lt;=</span> <span style="color: #ff0000;">'</span><span style="color: #ff0000;">1546224120</span><span style="color: #ff0000;">'</span>) <span style="color: #808080;">AND</span> (e.updated_in <span style="color: #808080;">&gt;</span> <span style="color: #ff0000;">'</span><span style="color: #ff0000;">1546224120</span><span style="color: #ff0000;">'</span>)</code></pre>

<p>&nbsp;</p>

</div></div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>