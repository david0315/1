<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修PHP中GD库的使用' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>PHP中GD库的使用</center></div><div class='banquan'>原文出处:本文由博客园博主凌晨两点半12138提供。<br/>
原文连接:https://www.cnblogs.com/huangzikai/p/11853388.html</div><br>
    <p>1、生成带有文字的普通图片</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;"> 1、新建空白画布 创建一个真颜色(黑白)的图片</span>
<span style="color: #800080;">$width</span> = <span style="color: #800080;">$height</span> = 200<span style="color: #000000;">;
</span><span style="color: #800080;">$img</span> = imagecreatetruecolor(<span style="color: #800080;">$width</span>, <span style="color: #800080;">$height</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">2、选择一个颜色用于背景</span>
<span style="color: #800080;">$red</span> = <span style="color: #800080;">$green</span> = <span style="color: #800080;">$blue</span> = 244<span style="color: #000000;">;
</span><span style="color: #800080;">$bgc</span> = imagecolorallocate(<span style="color: #800080;">$img</span>, <span style="color: #800080;">$red</span>, <span style="color: #800080;">$green</span>, <span style="color: #800080;">$blue</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">3、将背景颜色填充到画布中,在(0,0)左上角填充</span>
<span style="color: #800080;">$x</span> = <span style="color: #800080;">$y</span> = 0<span style="color: #000000;">;
imagefill(</span><span style="color: #800080;">$img</span>, <span style="color: #800080;">$x</span>, <span style="color: #800080;">$y</span>, <span style="color: #800080;">$blue</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">4、选择一个颜色用于字符</span>
<span style="color: #800080;">$cred</span> = <span style="color: #800080;">$cgreen</span> = <span style="color: #800080;">$cblue</span> = 7<span style="color: #000000;">;
</span><span style="color: #800080;">$color</span> = imagecolorallocate(<span style="color: #800080;">$img</span>, <span style="color: #800080;">$cred</span>, <span style="color: #800080;">$cgreen</span>, <span style="color: #800080;">$cblue</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">5、选择一个字符串在画布的(0,0)左上角进行绘制颜色为color</span>
<span style="color: #800080;">$cx</span> = <span style="color: #800080;">$cy</span> = 0<span style="color: #000000;">;
</span><span style="color: #800080;">$font</span> = 5;<span style="color: #008000;">//</span><span style="color: #008000;">值为1-5</span>
<span style="color: #800080;">$str</span> = 'hello';<span style="color: #008000;">//</span><span style="color: #008000;">只能输入英文</span>
imagestring(<span style="color: #800080;">$img</span>, <span style="color: #800080;">$font</span>, <span style="color: #800080;">$cx</span>, <span style="color: #800080;">$cy</span>, <span style="color: #800080;">$str</span>, <span style="color: #800080;">$color</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">6、把生成好的图片保存</span>
imagepng(<span style="color: #800080;">$img</span>,'image/1.png'<span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">7、关闭画布</span>
imagedestroy(<span style="color: #800080;">$img</span>);</code></pre>

<pre><code><span style="font-size: 14px;">imagefill():将图片填充到画布中的操作类似于在画图工具中使用填充工具将颜色涂满画布，在哪里'点击'都可以，只不过在画布左上角(0,0)上填充最方便。<br />代码中所有有关颜色的参数都类似于Css中的rgb()属性，其属性值为0~255</span></code></pre>
<p>结果如下：</p>
<p><img src="./images/PHP中GD库的使用0.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;2、生成复杂验证码图片(有线条和杂点)</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;">1、建立画布</span>
<span style="color: #800080;">$img</span> = imagecreatetruecolor('200', '80'<span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">2、生成并填充背景色</span>
<span style="color: #800080;">$bgc</span> = imagecolorallocate(<span style="color: #800080;">$img</span>, 220, 220, 200<span style="color: #000000;">);
imagefill(</span><span style="color: #800080;">$img</span>, 0, 0, <span style="color: #800080;">$bgc</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">3、用随机的颜色在随机的位置生成20条线段</span>
<span style="color: #0000ff;">for</span> (<span style="color: #800080;">$i</span> = 0; <span style="color: #800080;">$i</span> &lt; 20; <span style="color: #800080;">$i</span>++<span style="color: #000000;">) {
    </span><span style="color: #800080;">$x1</span> = <span style="color: #008080;">mt_rand</span>(0, 200<span style="color: #000000;">);
    </span><span style="color: #800080;">$y1</span> = <span style="color: #008080;">mt_rand</span>(0, 80<span style="color: #000000;">);
    </span><span style="color: #800080;">$x2</span> = <span style="color: #008080;">mt_rand</span>(0, 200<span style="color: #000000;">);
    </span><span style="color: #800080;">$y2</span> = <span style="color: #008080;">mt_rand</span>(0, 80<span style="color: #000000;">);
    </span><span style="color: #800080;">$red</span> = <span style="color: #008080;">mt_rand</span>(0, 255<span style="color: #000000;">);
    </span><span style="color: #800080;">$green</span> = <span style="color: #008080;">mt_rand</span>(0, 255<span style="color: #000000;">);
    </span><span style="color: #800080;">$blue</span> = <span style="color: #008080;">mt_rand</span>(0, 255<span style="color: #000000;">);
    </span><span style="color: #800080;">$color</span> = imagecolorallocate(<span style="color: #800080;">$img</span>, <span style="color: #800080;">$red</span>, <span style="color: #800080;">$green</span>, <span style="color: #800080;">$blue</span><span style="color: #000000;">);
    imageline(</span><span style="color: #800080;">$img</span>, <span style="color: #800080;">$x1</span>, <span style="color: #800080;">$y1</span>, <span style="color: #800080;">$x2</span>, <span style="color: #800080;">$y2</span>, <span style="color: #800080;">$color</span><span style="color: #000000;">);
}
</span><span style="color: #008000;">//</span><span style="color: #008000;">4、用随机的颜色在随机的位置生成100个像素点</span>
<span style="color: #0000ff;">for</span> (<span style="color: #800080;">$i</span> = 0; <span style="color: #800080;">$i</span> &lt; 100; <span style="color: #800080;">$i</span>++<span style="color: #000000;">) {
    </span><span style="color: #800080;">$x</span> = <span style="color: #008080;">mt_rand</span>(0, 200<span style="color: #000000;">);
    </span><span style="color: #800080;">$y</span> = <span style="color: #008080;">mt_rand</span>(0, 80<span style="color: #000000;">);
    </span><span style="color: #800080;">$color</span> = imagecolorallocate(<span style="color: #800080;">$img</span>, <span style="color: #008080;">mt_rand</span>(0, 255), <span style="color: #008080;">mt_rand</span>(0, 255), <span style="color: #008080;">mt_rand</span>(0, 255<span style="color: #000000;">));
    imagesetpixel(</span><span style="color: #800080;">$img</span>, <span style="color: #800080;">$x</span>, <span style="color: #800080;">$y</span>, <span style="color: #800080;">$color</span>);<span style="color: #008000;">//</span><span style="color: #008000;">像素点小可以使用圆</span>
<span style="color: #000000;">}
</span><span style="color: #008000;">//</span><span style="color: #008000;">5、用随机的颜色在随机的位置生成验证码文字</span>
<span style="color: #0000ff;">for</span> (<span style="color: #800080;">$i</span> = 0; <span style="color: #800080;">$i</span> &lt; 4; <span style="color: #800080;">$i</span>++<span style="color: #000000;">) {
    </span><span style="color: #800080;">$size</span> = 80/2;<span style="color: #008000;">//</span><span style="color: #008000;">单位 px 大小为高度的一半</span>
    <span style="color: #800080;">$angle</span> = <span style="color: #008080;">mt_rand</span>(-30, 30);<span style="color: #008000;">//</span><span style="color: #008000;">水平x轴为0度</span>
    <span style="color: #800080;">$x</span> = <span style="color: #800080;">$i</span> * 200 / 4<span style="color: #000000;">;
    </span><span style="color: #800080;">$y</span> = 80*3/4; <span style="color: #008000;">//</span><span style="color: #008000;">文字左下角为锚点(x,y) x平分画布的宽度，y为画布高度的3/4，</span>
    <span style="color: #800080;">$color</span> = imagecolorallocate(<span style="color: #800080;">$img</span>, <span style="color: #008080;">mt_rand</span>(0, 255), <span style="color: #008080;">mt_rand</span>(0, 255), <span style="color: #008080;">mt_rand</span>(0, 255<span style="color: #000000;">));
    </span><span style="color: #800080;">$fontfile</span> = __DIR__ . '/fonts/FZSTK.TTF';<span style="color: #008000;">//</span><span style="color: #008000;">字体文件的绝对路径(必须)，文件大于3M为中文字体文件</span>
    <span style="color: #800080;">$str</span> = 'qwertyuipasdfghjklzxcvbnmQWERTYUIPASDFGHJKLZXCVBNM123456789'<span style="color: #000000;">;
    </span><span style="color: #800080;">$text</span> = <span style="color: #800080;">$str</span>[<span style="color: #008080;">mt_rand</span>(0, <span style="color: #008080;">strlen</span>(<span style="color: #800080;">$str</span><span style="color: #000000;">))];
    imagettftext(</span><span style="color: #800080;">$img</span>, <span style="color: #800080;">$size</span>, <span style="color: #800080;">$angle</span>, <span style="color: #800080;">$x</span>, <span style="color: #800080;">$y</span>, <span style="color: #800080;">$color</span>, <span style="color: #800080;">$fontfile</span>, <span style="color: #800080;">$text</span><span style="color: #000000;">);
}
</span><span style="color: #008000;">//</span><span style="color: #008000;">6、保存</span>
<span style="color: #008080;">header</span>("content-type:image/png");<span style="color: #008000;">//</span><span style="color: #008000;">网页内容为图片类型</span>
imagepng(<span style="color: #800080;">$img</span>);<span style="color: #008000;">//</span><span style="color: #008000;">只有第一个参数，不会保存但显示在页面。
//7、销毁</span>
imagedestroy(<span style="color: #800080;">$img</span>);</code></pre>

<pre><code>imagepng()有两个参数，第一个参数是处理过后的图片；第二个参数是图片存储的路径和文件名(非必需)，两个参数都有即可保存图片，而只有第一个参数，图片不会保存，但可以立即显示在设备上，<br />不过要在显示前使用header()重新定义页面内容为图片格式，否则为文本格式会显示出一堆乱码。</code></pre>
<p>结果如下：</p>
<p><img src="./images/PHP中GD库的使用1.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;3、给图片添加文字水印</p>
<src class="cnblogs_code">
<pre><code>&lt;?<span style="color: #000000;">php
</span><span style="color: #008000;">//</span><span style="color: #008000;">1、导入图片,并计算宽高</span>
<span style="color: #800080;">$img</span> = imagecreatefromjpeg('image/33.jpg'<span style="color: #000000;">);
</span><span style="color: #800080;">$width</span> = imagesx(<span style="color: #800080;">$img</span><span style="color: #000000;">);
</span><span style="color: #800080;">$height</span> = imagesy(<span style="color: #800080;">$img</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">2,计算文本的宽高</span>
<span style="color: #800080;">$text</span> = '@轻点，疼'<span style="color: #000000;">;
</span><span style="color: #800080;">$fontfile</span> = __DIR__ . '/fonts/FZSTK.TTF';<span style="color: #008000;">//</span><span style="color: #008000;">字体文件的绝对路径(必须)，文件大于3M为中文字体文件</span>
<span style="color: #800080;">$textinfo</span> = imagettfbbox(20, 0, <span style="color: #800080;">$fontfile</span>, <span style="color: #800080;">$text</span>);<span style="color: #008000;">//</span><span style="color: #008000;">返回一个含有8个字段的数组，每两个字段一组，为一个角的x,y;左下-右下-右上-左上</span>
<span style="color: #800080;">$twidth</span> = <span style="color: #800080;">$textinfo</span>[2] - <span style="color: #800080;">$textinfo</span>[0];<span style="color: #008000;">//</span><span style="color: #008000;">文本宽</span>
<span style="color: #800080;">$theight</span> = <span style="color: #800080;">$textinfo</span>[1] - <span style="color: #800080;">$textinfo</span>[5];<span style="color: #008000;">//</span><span style="color: #008000;">文本高
//3、将文本填充进图片右下角</span>
<span style="color: #800080;">$x</span> = <span style="color: #800080;">$width</span> - <span style="color: #800080;">$twidth</span><span style="color: #000000;">;
</span><span style="color: #800080;">$y</span> = <span style="color: #800080;">$height</span><span style="color: #000000;">;
</span><span style="color: #800080;">$color</span> = imagecolorallocate(<span style="color: #800080;">$img</span>, 255, 255, 255<span style="color: #000000;">);
imagettftext(</span><span style="color: #800080;">$img</span>, 20, 0, <span style="color: #800080;">$x</span>, <span style="color: #800080;">$y</span>, <span style="color: #800080;">$color</span>, <span style="color: #800080;">$fontfile</span>, <span style="color: #800080;">$text</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">4、查看并销毁</span>
<span style="color: #008080;">header</span>('content-type:image/jpg'<span style="color: #000000;">);
imagejpeg(</span><span style="color: #800080;">$img</span><span style="color: #000000;">);
imagedestroy(</span><span style="color: #800080;">$img</span>);</code></pre>

<pre><code>代码中<span style="font-size: 15px;">imagettfbbox()</span>的参数分别为字体大小，角度，字体库文件和字符内容，其中角度以水平x轴为0度，字体库路径必须为绝对路径，如要使用中文，则必须导入中文字体库(一般大于3M)。函数返回值是一个<br />一维数组，如下所示：</code></pre>
<p>&nbsp; &nbsp; &nbsp;<img src="./images/PHP中GD库的使用2.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>结果如下：</p>
<p><img src="./images/PHP中GD库的使用3.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;4、将图片内容设为水印添加到其它图片</p>
<src class="cnblogs_code">
<pre><code>&lt;?<span style="color: #000000;">php
</span><span style="color: #800080;">$dst_im</span> = imagecreatefromjpeg('image/33.jpg');<span style="color: #008000;">//</span><span style="color: #008000;">背景图片</span>
<span style="color: #800080;">$src_im</span> = imagecreatefromjpeg('image/22.jpg');<span style="color: #008000;">//</span><span style="color: #008000;">要拼接图片</span>
<span style="color: #800080;">$dst_x</span> = 537;<span style="color: #008000;">//</span><span style="color: #008000;">从背景图片dst_im的(dst_x,$dst_y)处拼接</span>
<span style="color: #800080;">$dst_y</span> = 358<span style="color: #000000;">;
</span><span style="color: #800080;">$src_x</span> = 64;<span style="color: #008000;">//</span><span style="color: #008000;">从src_im的(src_x,src_y)处获取宽为src_w，高为src_h的图片</span>
<span style="color: #800080;">$src_y</span> = 370<span style="color: #000000;">;
</span><span style="color: #800080;">$src_w</span> = 153<span style="color: #000000;">;
</span><span style="color: #800080;">$src_h</span> = 148<span style="color: #000000;">;
</span><span style="color: #008000;">//</span><span style="color: #008000;">没有透明度</span>
imagecopy(<span style="color: #800080;">$dst_im</span>, <span style="color: #800080;">$src_im</span>, <span style="color: #800080;">$dst_x</span>, <span style="color: #800080;">$dst_y</span>, <span style="color: #800080;">$src_x</span>, <span style="color: #800080;">$src_y</span>, <span style="color: #800080;">$src_w</span>, <span style="color: #800080;">$src_h</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">带有透明度</span>
<span style="color: #800080;">$dst_y</span>-=200<span style="color: #000000;">;
</span><span style="color: #800080;">$pct</span>=50;<span style="color: #008000;">//</span><span style="color: #008000;">透明度 值为1~100 对应透明~不透明</span>
imagecopymerge(<span style="color: #800080;">$dst_im</span>, <span style="color: #800080;">$src_im</span>, <span style="color: #800080;">$dst_x</span>, <span style="color: #800080;">$dst_y</span>, <span style="color: #800080;">$src_x</span>, <span style="color: #800080;">$src_y</span>, <span style="color: #800080;">$src_w</span>, <span style="color: #800080;">$src_h</span>,<span style="color: #800080;">$pct</span><span style="color: #000000;">);
</span><span style="color: #008080;">header</span>('content-type:image/jpg'<span style="color: #000000;">);
imagejpeg(</span><span style="color: #800080;">$dst_im</span><span style="color: #000000;">);
imagedestroy(</span><span style="color: #800080;">$dst_im</span><span style="color: #000000;">);
imagedestroy(</span><span style="color: #800080;">$src_im</span>);</code></pre>

<p>结果如下：<br /><img src="./images/PHP中GD库的使用4.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;5、将图片进行缩放并显示在原图上</p>
<src class="cnblogs_code">
<pre><code>&lt;?<span style="color: #000000;">php
</span><span style="color: #800080;">$dst_im</span> = imagecreatefromjpeg('image/33.jpg');<span style="color: #008000;">//</span><span style="color: #008000;">背景图片</span>
<span style="color: #800080;">$src_im</span> = imagecreatefromjpeg('image/22.jpg');<span style="color: #008000;">//</span><span style="color: #008000;">要拼接图片</span>
<span style="color: #800080;">$dst_x</span> = 537;<span style="color: #008000;">//</span><span style="color: #008000;">从背景图片dst_im的(dst_x,$dst_y)处拼接</span>
<span style="color: #800080;">$dst_y</span> = 358<span style="color: #000000;">;
</span><span style="color: #800080;">$src_x</span> = 64;<span style="color: #008000;">//</span><span style="color: #008000;">从src_im的(src_x,src_y)处获取宽为src_w，高为src_h的图片</span>
<span style="color: #800080;">$src_y</span> = 370<span style="color: #000000;">;
</span><span style="color: #800080;">$src_w</span> = 153<span style="color: #000000;">;
</span><span style="color: #800080;">$src_h</span> = 148<span style="color: #000000;">;<span style="color: #008000;">//缩放前的尺寸
</span></span><span style="color: #800080;">$dst_w</span>=<span style="color: #800080;">$dst_h</span>=50<span style="color: #000000;">;<span style="color: #008000;">//缩放后的尺寸
</span></span><span style="color: #008000;">//</span><span style="color: #008000;">1、imagecopyresampled 生成的图片质量更高，处理速度更慢并且占用一定的CPU资源。</span>
imagecopyresampled(<span style="color: #800080;">$dst_im</span>, <span style="color: #800080;">$src_im</span>, <span style="color: #800080;">$dst_x</span>, <span style="color: #800080;">$dst_y</span>, <span style="color: #800080;">$src_x</span>, <span style="color: #800080;">$src_y</span>,<span style="color: #800080;">$dst_w</span>,<span style="color: #800080;">$dst_h</span>, <span style="color: #800080;">$src_w</span>, <span style="color: #800080;">$src_h</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">2、imagecopyresized 缩放图像的算法比较粗糙.处理速度快，只适合不要求清晰度但需要迅速生成缩略图的情况。</span>
<span style="color: #800080;">$dst_x</span>+=100<span style="color: #000000;">;
imagecopyresized(</span><span style="color: #800080;">$dst_im</span>, <span style="color: #800080;">$src_im</span>, <span style="color: #800080;">$dst_x</span>, <span style="color: #800080;">$dst_y</span>, <span style="color: #800080;">$src_x</span>, <span style="color: #800080;">$src_y</span>,<span style="color: #800080;">$dst_w</span>,<span style="color: #800080;">$dst_h</span>, <span style="color: #800080;">$src_w</span>, <span style="color: #800080;">$src_h</span><span style="color: #000000;">);
</span><span style="color: #008080;">header</span>('content-type:image/jpg'<span style="color: #000000;">);
imagejpeg(</span><span style="color: #800080;">$dst_im</span><span style="color: #000000;">);
imagedestroy(</span><span style="color: #800080;">$dst_im</span><span style="color: #000000;">);
imagedestroy(</span><span style="color: #800080;">$src_im</span>);</code></pre>

<p>结果如下：</p>
<p><img src="./images/PHP中GD库的使用5.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;6、缩略图</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;">1、打开原图，获取宽，高</span>
<span style="color: #800080;">$img</span>=imagecreatefromjpeg('image/11.jpg'<span style="color: #000000;">);
</span><span style="color: #800080;">$src_w</span>=imagesx(<span style="color: #800080;">$img</span><span style="color: #000000;">);
</span><span style="color: #800080;">$src_h</span>=imagesy(<span style="color: #800080;">$img</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">2、设置缩放比例，并创建空白画布</span>
<span style="color: #800080;">$scale</span>=0.1<span style="color: #000000;">;
</span><span style="color: #800080;">$dst_w</span>=<span style="color: #800080;">$src_w</span>*<span style="color: #800080;">$scale</span><span style="color: #000000;">;
</span><span style="color: #800080;">$dst_h</span>=<span style="color: #800080;">$src_h</span>*<span style="color: #800080;">$scale</span><span style="color: #000000;">;
</span><span style="color: #800080;">$dst_im</span>=imagecreatetruecolor(<span style="color: #800080;">$dst_w</span>,<span style="color: #800080;">$dst_h</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">3、将原图img的宽高缩放为（dst_w,dst_h）并放置到dst_im上。</span>
imagecopyresampled(<span style="color: #800080;">$dst_im</span>, <span style="color: #800080;">$img</span>, 0, 0, 0, 0,<span style="color: #800080;">$dst_w</span>,<span style="color: #800080;">$dst_h</span>, <span style="color: #800080;">$src_w</span>, <span style="color: #800080;">$src_h</span><span style="color: #000000;">);
</span><span style="color: #008080;">header</span>('content-type:image/jpeg'<span style="color: #000000;">);
imagecopyresized(</span><span style="color: #800080;">$dst_im</span>, <span style="color: #800080;">$img</span>, 0, 0, 0, 0,<span style="color: #800080;">$dst_w</span>,<span style="color: #800080;">$dst_h</span>, <span style="color: #800080;">$src_w</span>, <span style="color: #800080;">$src_h</span><span style="color: #000000;">);
imagejpeg(</span><span style="color: #800080;">$dst_im</span>,'image/resampled.jpg');<span style="color: #008000;">//文件</span><span style="color: #008000;">更小，更清晰</span>
imagejpeg(<span style="color: #800080;">$dst_im</span>,'image/resized.jpg'<span style="color: #000000;">);
imagedestroy(</span><span style="color: #800080;">$dst_im</span><span style="color: #000000;">);
imagedestroy(</span><span style="color: #800080;">$img</span>);</code></pre>

<p>结果如下:</p>
<p><img src="./images/PHP中GD库的使用6.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

</div></div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>