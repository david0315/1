<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修[开源] LaravelPlus - 基于 Laravel 魔改，为方便实际业务使用 - 开发中' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>[开源] LaravelPlus - 基于 Laravel 魔改，为方便实际业务使用 - 开发中</center></div><div class='banquan'>原文出处:本文由博客园博主ben1024提供。<br/>
原文连接:https://www.cnblogs.com/ben1024/p/laravel-plus.html</div><br>
    <h2>目的</h2>
<p>为了减少重复 CURD 和新项目的配置麻烦等问题，(<del>就是为了骗星星</del>：<a href="https://github.com/ElapseAnnals/LaravelPlus">LaravelPlus</a>&nbsp;)<br />如：</p>
<ul>
<li>现有的 infyomlabs/laravel-generator CODE 生成工具虽然好用，但是不太喜欢样式和代码结构。</li>
<li>有些本地，测试，线上的配置需要频繁改动的需要。</li>
<li>多个项目构建引入包，配置扩展等重复性操作</li>

</ul>
<src data-unique="61a3ec">&nbsp;
<h2>介绍</h2>
<p><a href="https://github.com/ElapseAnnals/LaravelPlus">LaravelPlus</a>&nbsp;基于&nbsp;<a href="https://github.com/laravel/laravel">Laravel</a>&nbsp;增加部分软件包初始安装和进行业务使用功能改动，来创建一个开箱即用的应用</p>
<src data-unique="1977c3">&nbsp;
<h2>版本基础</h2>
<p>当前版本基于</p>
<table>
<thead>
<tr><th>PHP</th><th>Laravel (影响不大，降低版本理论可以)</th></tr>

</thead>
<tbody>
<tr>
<td>&gt;=7.1.3</td>
<td>&gt;=5.8</td>

</tr>

</tbody>

</table>
<src data-unique="377a17">&nbsp;
<h2>项目使用说明</h2>
<src data-unique="f20af1">&nbsp;
<h4>下载项目</h4>
<pre><code><code><span class="token comment">// 1. github （推荐）
$ git <span class="token keyword">clone https<span class="token punctuation">:<span class="token comment">//github.com/ElapseAnnals/LaravelPlus.git  
$ git checkout v5<span class="token punctuation">.<span class="token number">8.0 <span class="token comment">// 切换至当前最新稳定版本

<span class="token comment">// 或

<span class="token comment">// 2. composer
$ composer create<span class="token operator">-project elapse<span class="token operator">-annals<span class="token operator">/laravel<span class="token operator">-plus
$ mv laravel<span class="token operator">-plus  LaravelPlus</span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></code></pre>
<src data-unique="4ad926">&nbsp;
<h4>复制项目</h4>
<pre><code><code><span class="token comment">//  1.在当前目录运行自动复制脚本 (推荐)
$ php LaravelPlus<span class="token operator">/create YourProject

<span class="token comment">// 或

<span class="token comment">//  2.在当前目录手动复制项目至自身项目
$ cd LaravelPlus
$ rm composer<span class="token punctuation">.lock
$ rsync <span class="token operator">-av <span class="token operator">--exclude  <span class="token punctuation">. <span class="token operator">--exclude  <span class="token punctuation">.<span class="token punctuation">. <span class="token operator">--exclude  <span class="token punctuation">.git<span class="token operator">/ <span class="token operator">--exclude  vendor<span class="token operator">/ <span class="token operator">--exclude  <span class="token punctuation">.github<span class="token operator">/ LaravelPlus<span class="token comment">/* YourProject             
                    //  为消除对称  */         
$ cd YourProject
$ rm composer<span class="token punctuation">.lock <span class="token punctuation">.env <span class="token punctuation">.travis
$ cp <span class="token punctuation">.env<span class="token punctuation">.example <span class="token punctuation">.env   </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></code></pre>
<src data-unique="2cb472">&nbsp;
<h4>初始化</h4>
<pre><code><code>$ cd YourProject <span class="token comment">//  进入 YourProject 项目中
$ composer install   <span class="token comment">// 更新软件包 （请先已安装 composer ）
$ php artisan key<span class="token punctuation">:generate    <span class="token comment">// 更新 key
$ php artisan vendor<span class="token punctuation">:publish <span class="token comment">// 发布扩展包的资源
$ php artisan migrate  <span class="token comment">// 迁移
$ php artisan storage<span class="token punctuation">:link <span class="token comment">// 图片资源软连接映射【非必须】</span></span></span></span></span></span></span></span></span></code></code></pre>
<p>Tips:</p>
<ol>
<li>兼容 laravel-plus 目录名</li>
</ol><hr />
<src data-unique="9b370b">&nbsp;
<h2>功能使用说明</h2>
<h5>创建 framework 分层脚本和<a href="https://learnku.com/docs/laravel/5.8/controllers/1296#resource-controllers">资源映射：想法来源</a></h5>
<p>framework 脚本创建内容：</p>
<ul>
<li>Controller, Service, Repository 等文件和对应关联关系</li>
<li>Route 资源路由增加</li>
<li>Controller 中资源类型代码和模型数据处理（开发中）</li>
</ul>
<p>直接使用本项目内容（推荐）</p>
<pre><code><code> $ php artisan make<span class="token punctuation">:framework Test  <span class="token comment">// 创建分层结构（推荐）
 $ php artisan make<span class="token punctuation">:framework Test <span class="token operator">--basis  <span class="token comment">// 创建系统分层和主要分层结构（Controller, Service, Repository）
 $ php artisan make<span class="token punctuation">:framework Test <span class="token operator">--<span class="token constant">D <span class="token comment">// 删除分层结构 </span></span></span></span></span></span></span></span></span></code></code></pre>
<p>或引入&nbsp;<a href="https://github.com/PHPTool/LaravelPlusMake">php-tool/laravel-plus-make</a>&nbsp;Laravel Plus Make 插件软件包（更新进度略慢本项目）</p>
<pre><code><code>$ composer <span class="token keyword">require php<span class="token operator">-tool<span class="token operator">/laravel<span class="token operator">-plus<span class="token operator">-make</span></span></span></span></span></code></code></pre>
<h5>热切换配置使用（config/dynamic/）</h5>
<p>在 .env 中设置 ENABLE_HOT_SWITCHING=true 后，会在 AppServiceProvider 进行 dynamic 映射（对性能有一定影响，慎用）</p>
<p>使用方式：</p>
<pre><code><code><span class="token php language-php"><span class="token delimiter important">&lt;?php
<span class="token variable">$env <span class="token operator">= <span class="token function">config<span class="token punctuation">(<span class="token single-quoted-string string">'dynamic.env'<span class="token punctuation">)<span class="token punctuation">;</span></span></span></span></span></span></span></span></span></code></code></pre>
<p>dynamic 目录文件说明</p>
<ul>
<li>production 生产环境 (必须配置)</li>
<li>develop 开发环境 (必须配置，以下配置继承 develop 配置)
<ul>
<li>test 测试环境</li>
<li>local 本地环境</li>
<li>simulation 仿真环境</li>
</ul>
</li>
</ul>
<p>Tips：</p>
<ol>
<li>.env 配置 DYNAMIC_IS_STRICT 控制热配是否严格模式（默认 false 关闭）
<ul>
<li>严格模式下不会继承 production/develop，完全采用当前环境配置</li>
</ul>
</li>
<li>默认在继承基础上有重复属性，会覆盖继承项</li>
<li>继承基础特有属性会被携带至当前配置</li>
<li>config/dynamic.php 为 IDEA 提示文件，使用空 key 即可</li>
</ol>
<p>优化默认路由中闭包</p>
<ul>
<li>路由中禁止使用闭包，如有需要请在 ClosureController 中注册</li>
</ul>
<h5>缓存清理</h5>
<ul>
<li>php artisan optimize:clear // (慎用）
<ul>
<li>php artisan view:clear</li>
<li>php artisan cache:clear // 应用程序缓存清理 (慎用 - 会清理 config.cache 中启用缓存 (file/db/redis 等))</li>
<li>php artisan route:cache</li>
<li>php artisan config:clear</li>
<li>php artisan clear-compiled // 清理编译<br />php artisan debug:clear</li>

</ul>

</li>

</ul>
<src data-unique="38a101">&nbsp;
<h2>性能优化（只建议生产环境使用）</h2>
<ul>
<li>php artisan optimize // 类映射加载优化（该命令会自动缓存 config/route）
<ul>
<li>php artisan config:cache // 配置缓存</li>
<li>php artisan route:cache // 路由</li>

</ul>

</li>
<li>php artisan view:cache // 视图缓存</li>
<li>composer dump-autoload --optimize //</li>
<li>开启 OpCache
<pre><code><code>$ sudo vim <span class="token operator">/etc<span class="token operator">/php<span class="token operator">/<span class="token number">7.2<span class="token operator">/fpm<span class="token operator">/php<span class="token punctuation">.ini
<span class="token comment">// set opcache.enable=1
<span class="token comment">// ...
$ sudo service php5<span class="token punctuation">.<span class="token number">6<span class="token operator">-fpm restart
$ sudo service nginx restart</span></span></span></span></span></span></span></span></span></span></span></span></code></code></pre>
</li>
</ul>
<h5>前端样式构建</h5>
<pre><code><code>$ npm run dev    <span class="token comment">// 本地开发,开启 debug 模式

$ npm run prod    <span class="token comment">// 线上部署（进行压缩资源）

$ npm run watch   <span class="token comment">// 监视编译（开发时建议启用）</span></span></span></code></code></pre>
<hr />
<src data-unique="da1177">&nbsp;
<h3><a href="https://github.com/ElapseAnnals/LaravelPlus/wiki/3.-%E6%94%B9%E5%8A%A8%E5%86%85%E5%AE%B9">改动内容</a></h3>
<ul>
<li>设置日志打印默认按天执行（.env::LOG_CHANNEL）</li>
<li>
<p>增加默认加载软件包</p>
<ul>
<li>production 生产环境
<ul>
<li><a href="https://github.com/Respect/Validation">respect/validation</a>&nbsp;验证包</li>
<li><a href="https://github.com/reactphp/react">react/react</a>&nbsp;ReactPHP 多进程异步扩展（可以移除）</li>
<li>引入 ElasticSearch For scout
<ul>
<li><a href="https://github.com/laravel/scout">laravel/scout</a></li>
<li><a href="https://github.com/ErickTamayo/laravel-scout-elastic">tamayo/laravel-scout-elastic</a>
<ul>
<li><a href="https://github.com/elastic/elasticsearch-php">elastic/elasticsearch-php</a>&nbsp;原生 ElasticSearch (可选)</li>
</ul>
</li>
</ul>
</li>
<li>rabbitMQ 扩展
<ul>
<li>vladimir-yuldashev/laravel-queue-rabbitmq - php-amqplib/php-amqplib 原生（可选）</li>
</ul>
</li>
<li><a href="https://github.com/rap2hpoutre/laravel-log-viewer">rap2hpoutre/laravel-log-viewer</a>&nbsp;日志展示 [访问 host/logs]</li>
<li><a href="https://github.com/nrk/predis">predis/predis</a>&nbsp;Redis 插件（建议使用 php-redis 扩展）</li>
<li><a href="https://github.com/PHPTool/LaravelPlusMake">php-tool/laravel-plus-make</a>&nbsp;Laravel Plus Make 自动生成 framework 代码插件软件包（可单独引用）</li>
<li><a href="https://github.com/guzzle/guzzle">guzzlehttp/guzzle</a>&nbsp;Http 请求包</li>
<li><a href="https://github.com/overtrue/laravel-lang">overtrue/laravel-lang</a>&nbsp;多语言本地化 i18n</li>
</ul>
</li>
<li>develop 开发环境
<ul>
<li><a href="https://github.com/reliese/laravel">reliese/laravel</a>&nbsp;模型生成工具
<pre><code><code>$ php artisan code<span class="token punctuation">:models <span class="token operator">--table<span class="token operator">=tb_name</span></span></span></code></code></pre>
</li>
<li>[doctrine/dbal]</li>
<li><a href="https://github.com/barryvdh/laravel-debugbar">barryvdh/laravel-debugbar</a>&nbsp;debuger 工具</li>
<li><a href="https://github.com/barryvdh/laravel-ide-helper">barryvdh/laravel-ide-helper</a>&nbsp;ide 辅助工具
<pre><code><code>$ artisan ide<span class="token operator">-helper<span class="token punctuation">:generate</span></span></code></code></pre>
</li>
<li><a href="https://github.com/overtrue/laravel-query-logger">overtrue/laravel-query-logger</a>&nbsp;日志工具</li>
<li><a href="https://github.com/nunomaduro/phpinsights">nunomaduro/phpinsights</a>&nbsp;统计检测项目问题（类似 PHPCS, 需求版本 php 7.2.* ，请手动安装 composer require nunomaduro/phpinsights --dev）</li>
<li><a href="https://github.com/InfyOmLabs/laravel-generator">infyomlabs/laravel-generator</a>&nbsp;Code 代码生成工具（可选）</li>
</ul>
</li>
</ul>
</li>
<li>
<p>增加前端资源</p>
<ul>
<li>element-ui 样式框架（可选方案 iview）</li>
</ul>
</li>
<li>
<p>增加默认图片存储目录（storage/app/public/images)</p>
</li>
<li>扩展结构分层&nbsp;<a href="https://learnku.com/articles/19452?order_by=created_at&amp;">想法来源</a>
<ul>
<li>系统分层
<ul>
<li>Controllers 控制器层</li>
</ul>
</li>
<li>主要分层
<ul>
<li>Services 业务服务层</li>
<li>Repositories Repository 数据仓库层</li>
<li>Models 模型层（无需创建，默认通过模型工具创建）</li>
</ul>
</li>
<li>扩展分层
<ul>
<li>Presenters 固定业务主持中控层</li>
<li>Transformers 转化层 / 筛选层（筛选后在选择输出）</li>
<li>Formatters 格式化层（对于输出数据进行格式化，服务于 view 层），便于前端模版渲染与展示</li>
</ul>
</li>
</ul>
</li>
<li>增加 Redis 多语言配置读取</li>
</ul>
<src data-unique="b60ec8">&nbsp;
<h2>待办</h2>
<p>完善资源功能：Controller 中模型数据处理和数据返回</p>
<p>增加 Redis 多语言数据库，和迁移</p>
<p>增加动态视图模式和静态视图模式（渲染后生成 view）切换</p>
<p>完善 wiki</p>

</div></div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>