<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修深入浅出 PHP SPL（PHP 标准库)(转)' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>深入浅出 PHP SPL（PHP 标准库)(转)</center></div><div class='banquan'>原文出处:本文由博客园博主自由TK提供。<br/>
原文连接:https://www.cnblogs.com/wscsq789/p/12005689.html</div><br>
    <h1>一、什么是spl库？</h1>
<p>SPL是用于解决典型问题(standard problems)的一组接口与类的集合。</p>
<p>此扩展只能在php 5.0以后使用，从PHP 5.3.0 不再被关闭,会一直有效.成为php内核组件一部份。</p>
<p>SPL提供了一组标准数据结构。</p>
<p>&nbsp;</p>
<h1>二、SPL如何使用？</h1>
<p>1.构建此扩展不需要其他扩展。</p>
<p>更详细的情况可参考&nbsp;<a href="http://php.net/manual/zh/spl.datastructures.php">http://php.net/manual/zh/spl.datastructures.php</a></p>
<h2>双向链表</h2>
<p>双链表是一种重要的线性存储结构，对于双链表中的每个节点，不仅仅存储自己的信息，还要保存前驱和后继节点的地址。</p>
<p><a href="http://php.net/manual/zh/class.spldoublylinkedlist.php">SplDoublyLinkedList</a></p>
<ul class=" list-paddingleft-2">
<li>
<p><a href="http://php.net/manual/zh/class.splstack.php">SplStack</a>（栈）</p>
</li>
<li>
<p><a href="http://php.net/manual/zh/class.splqueue.php">SplQueue</a>（队列）</p>
</li>
</ul>
<p>&nbsp;</p>
<src class="cnblogs_code">
<pre><code>SplDoublyLinkedList <span style="color: #0000ff;">implements</span> Iterator , ArrayAccess , Countable {    <span style="color: #008000;">/*</span><span style="color: #008000;"> 方法 </span><span style="color: #008000;">*/</span>
    <span style="color: #0000ff;">public</span><span style="color: #000000;"> __construct ( void )    
    </span><span style="color: #0000ff;">public</span> void add ( <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$index</span> , <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$newval</span><span style="color: #000000;"> )    
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> bottom ( void )<span style="color: #008000;">//</span><span style="color: #008000;">双链表的尾部节点</span>
    <span style="color: #0000ff;">public</span> int <span style="color: #008080;">count</span> ( void )<span style="color: #008000;">//</span><span style="color: #008000;">双联表元素的个数</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> <span style="color: #008080;">current</span> ( void )<span style="color: #008000;">//</span><span style="color: #008000;">当前记录</span>
    <span style="color: #0000ff;">public</span> int getIteratorMode ( void ) <span style="color: #008000;">//</span><span style="color: #008000;">获取迭代模式</span>
    <span style="color: #0000ff;">public</span> bool isEmpty ( void )<span style="color: #008000;">//</span><span style="color: #008000;">检测双链表是否为空</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> <span style="color: #008080;">key</span> ( void )<span style="color: #008000;">//</span><span style="color: #008000;">当前节点索引</span>
    <span style="color: #0000ff;">public</span> void <span style="color: #008080;">next</span> ( void )<span style="color: #008000;">//</span><span style="color: #008000;">移到下条记录</span>
    <span style="color: #0000ff;">public</span> bool offsetExists ( <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$index</span> )<span style="color: #008000;">//</span><span style="color: #008000;">指定index处节点是否存在</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> offsetGet ( <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$index</span> )<span style="color: #008000;">//</span><span style="color: #008000;">获取指定index处节点值</span>
    <span style="color: #0000ff;">public</span> void offsetSet ( <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$index</span> , <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$newval</span> )<span style="color: #008000;">//</span><span style="color: #008000;">设置指定index处值</span>
    <span style="color: #0000ff;">public</span> void offsetUnset ( <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$index</span> )<span style="color: #008000;">//</span><span style="color: #008000;">删除指定index处节点</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> pop ( void )<span style="color: #008000;">//</span><span style="color: #008000;">从双链表的尾部弹出元素</span>
    <span style="color: #0000ff;">public</span> void <span style="color: #008080;">prev</span> ( void )<span style="color: #008000;">//</span><span style="color: #008000;">移到上条记录</span>
    <span style="color: #0000ff;">public</span> void push ( <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$value</span> )<span style="color: #008000;">//</span><span style="color: #008000;">添加元素到双链表的尾部</span>
    <span style="color: #0000ff;">public</span> void <span style="color: #008080;">rewind</span> ( void )<span style="color: #008000;">//</span><span style="color: #008000;">将指针指向迭代开始处</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span> <span style="color: #008080;">serialize</span> ( void )<span style="color: #008000;">//</span><span style="color: #008000;">序列化存储</span>
    <span style="color: #0000ff;">public</span> void setIteratorMode ( int <span style="color: #800080;">$mode</span> )<span style="color: #008000;">//</span><span style="color: #008000;">设置迭代模式</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> shift ( void )<span style="color: #008000;">//</span><span style="color: #008000;">双链表的头部移除元素</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> top ( void )<span style="color: #008000;">//</span><span style="color: #008000;">双链表的头部节点</span>
    <span style="color: #0000ff;">public</span> void <span style="color: #008080;">unserialize</span> ( <span style="color: #0000ff;">string</span> <span style="color: #800080;">$serialized</span> )<span style="color: #008000;">//</span><span style="color: #008000;">反序列化</span>
    <span style="color: #0000ff;">public</span> void unshift ( <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$value</span> )<span style="color: #008000;">//</span><span style="color: #008000;">双链表的头部添加元素</span>
    <span style="color: #0000ff;">public</span> bool valid ( void )<span style="color: #008000;">//</span><span style="color: #008000;">检查双链表是否还有节点</span>
}</code></pre>

<p>&nbsp;</p>
<p>&nbsp; 接下来是使用方法：</p>
<src class="cnblogs_code">
<pre><code><span style="color: #800080;">$list&nbsp;=&nbsp;new&nbsp;SplDoublyLinkedList();<br /></span><span style="color: #800080;">$list</span>-&gt;push('a'<span>);</span></code></pre>
<pre><code><em id="__mceDel"><span style="color: #800080;">$list</span>-&gt;push('b'<span style="color: #000000;">);
</span><span style="color: #800080;">$list</span>-&gt;push('c'<span style="color: #000000;">);
</span><span style="color: #800080;">$list</span>-&gt;push('d'<span style="color: #000000;">);
 
</span><span style="color: #800080;">$list</span>-&gt;unshift('top'<span style="color: #000000;">);
</span><span style="color: #800080;">$list</span>-&gt;<span style="color: #000000;">shift();
 
</span><span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">rewind</span>();<span style="color: #008000;">//</span><span style="color: #008000;">rewind操作用于把节点指针指向Bottom所在的节点</span>
<span style="color: #0000ff;">echo</span> 'curren node:'.<span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">current</span>()."&lt;br /&gt;";<span style="color: #008000;">//</span><span style="color: #008000;">获取当前节点</span>
 
<span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">next</span>();<span style="color: #008000;">//</span><span style="color: #008000;">指针指向下一个节点</span>
<span style="color: #0000ff;">echo</span> 'next node:'.<span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">current</span>()."&lt;br /&gt;"<span style="color: #000000;">;
 
</span><span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">next</span><span style="color: #000000;">();
</span><span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">next</span><span style="color: #000000;">();
</span><span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">prev</span>();<span style="color: #008000;">//</span><span style="color: #008000;">指针指向上一个节点</span>
<span style="color: #0000ff;">echo</span> 'next node:'.<span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">current</span>()."&lt;br /&gt;"<span style="color: #000000;">;
 
</span><span style="color: #0000ff;">if</span>(<span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">current</span><span style="color: #000000;">())
    </span><span style="color: #0000ff;">echo</span> 'current node is valid&lt;br /&gt;'<span style="color: #000000;">;
</span><span style="color: #0000ff;">else</span>
    <span style="color: #0000ff;">echo</span> 'current node is invalid&lt;br /&gt;'<span style="color: #000000;">;
     
</span><span style="color: #0000ff;">if</span>(<span style="color: #800080;">$list</span>-&gt;valid())<span style="color: #008000;">//</span><span style="color: #008000;">如果当前节点是有效节点，valid返回true</span>
    <span style="color: #0000ff;">echo</span> "valid list&lt;br /&gt;"<span style="color: #000000;">;
</span><span style="color: #0000ff;">else</span>
  <span style="color: #0000ff;">echo</span> "invalid list &lt;br /&gt;"<span style="color: #000000;">;
 
</span><span style="color: #008080;">var_dump</span>(<span style="color: #0000ff;">array</span><span style="color: #000000;">(
    </span>'pop' =&gt; <span style="color: #800080;">$list</span>-&gt;pop(),
    'count' =&gt; <span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">count</span>(),    
    'isEmpty' =&gt; <span style="color: #800080;">$list</span>-&gt;isEmpty(),    
    'bottom' =&gt; <span style="color: #800080;">$list</span>-&gt;bottom(),    
    'top' =&gt; <span style="color: #800080;">$list</span>-&gt;<span style="color: #000000;">top()
));
 
</span><span style="color: #800080;">$list</span>-&gt;setIteratorMode(SplDoublyLinkedList::<span style="color: #000000;">IT_MODE_FIFO);
</span><span style="color: #008080;">var_dump</span>(<span style="color: #800080;">$list</span>-&gt;<span style="color: #000000;">getIteratorMode());
 
</span><span style="color: #0000ff;">for</span>(<span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">rewind</span>(); <span style="color: #800080;">$list</span>-&gt;valid(); <span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">next</span><span style="color: #000000;">()){
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">current</span>().<span style="color: #ff00ff;">PHP_EOL</span><span style="color: #000000;">;
}
 
</span><span style="color: #008080;">var_dump</span>(<span style="color: #800080;">$a</span> = <span style="color: #800080;">$list</span>-&gt;<span style="color: #008080;">serialize</span><span style="color: #000000;">());
</span><span style="color: #008000;">//</span><span style="color: #008000;">print_r($list-&gt;unserialize($a));</span>
 
<span style="color: #800080;">$list</span>-&gt;offsetSet(0,'new one'<span style="color: #000000;">);
</span><span style="color: #800080;">$list</span>-&gt;offsetUnset(0<span style="color: #000000;">);
</span><span style="color: #008080;">var_dump</span>(<span style="color: #0000ff;">array</span><span style="color: #000000;">(
    </span>'offsetExists' =&gt; <span style="color: #800080;">$list</span>-&gt;offsetExists(4),    
    'offsetGet' =&gt; <span style="color: #800080;">$list</span>-&gt;offsetGet(0),<span style="color: #000000;">
));
</span><span style="color: #008080;">var_dump</span>(<span style="color: #800080;">$list</span><span style="color: #000000;">);
 
</span><span style="color: #008000;">//</span><span style="color: #008000;">堆栈，先进后出</span>
<span style="color: #800080;">$stack</span> = <span style="color: #0000ff;">new</span> SplStack();<span style="color: #008000;">//</span><span style="color: #008000;">继承自SplDoublyLinkedList类</span>
 
<span style="color: #800080;">$stack</span>-&gt;push("a&lt;br /&gt;"<span style="color: #000000;">);
</span><span style="color: #800080;">$stack</span>-&gt;push("b&lt;br /&gt;"<span style="color: #000000;">);
 
</span><span style="color: #0000ff;">echo</span> <span style="color: #800080;">$stack</span>-&gt;<span style="color: #000000;">pop();
</span><span style="color: #0000ff;">echo</span> <span style="color: #800080;">$stack</span>-&gt;<span style="color: #000000;">pop();
</span><span style="color: #0000ff;">echo</span> <span style="color: #800080;">$stack</span>-&gt;offsetSet(0,'B');<span style="color: #008000;">//</span><span style="color: #008000;">堆栈的offset=0是Top所在的位置，offset=1是Top位置节点靠近bottom位置的相邻节点，以此类推</span>
 
<span style="color: #800080;">$stack</span>-&gt;<span style="color: #008080;">rewind</span>();<span style="color: #008000;">//</span><span style="color: #008000;">双向链表的rewind和堆栈的rewind相反，堆栈的rewind使得当前指针指向Top所在的位置，而双向链表调用之后指向bottom所在位置</span>
<span style="color: #0000ff;">echo</span> 'current:'.<span style="color: #800080;">$stack</span>-&gt;<span style="color: #008080;">current</span>().'&lt;br /&gt;'<span style="color: #000000;">;
</span><span style="color: #800080;">$stack</span>-&gt;<span style="color: #008080;">next</span>();<span style="color: #008000;">//</span><span style="color: #008000;">堆栈的next操作使指针指向靠近bottom位置的下一个节点，而双向链表是靠近top的下一个节点</span>
<span style="color: #0000ff;">echo</span> 'current:'.<span style="color: #800080;">$stack</span>-&gt;<span style="color: #008080;">current</span>().'&lt;br /&gt;'<span style="color: #000000;">;
</span><span style="color: #0000ff;">echo</span> '&lt;br /&gt;&lt;br /&gt;'<span style="color: #000000;">;
 
</span><span style="color: #008000;">//</span><span style="color: #008000;">队列，先进先出</span>
<span style="color: #800080;">$queue</span> = <span style="color: #0000ff;">new</span> SplQueue();<span style="color: #008000;">//</span><span style="color: #008000;">继承自SplDoublyLinkedList类</span>
<span style="color: #800080;">$queue</span>-&gt;enqueue("a&lt;br /&gt;");<span style="color: #008000;">//</span><span style="color: #008000;">插入一个节点到队列里面的Top位置</span>
<span style="color: #800080;">$queue</span>-&gt;enqueue("b&lt;br /&gt;"<span style="color: #000000;">);
</span><span style="color: #800080;">$queue</span>-&gt;offsetSet(0,'A');<span style="color: #008000;">//</span><span style="color: #008000;">堆栈的offset=0是Top所在的位置，offset=1是Top位置节点靠近bottom位置的相邻节点，以此类推</span>
<span style="color: #0000ff;">echo</span> <span style="color: #800080;">$queue</span>-&gt;<span style="color: #000000;">dequeue();
</span><span style="color: #0000ff;">echo</span> <span style="color: #800080;">$queue</span>-&gt;<span style="color: #000000;">dequeue();
</span><span style="color: #0000ff;">echo</span> "&lt;br /&gt;&lt;br /&gt;";</em></code></pre>

<p><span style="font-size: 1.5em;">堆</span>&nbsp;</p>
<p>堆(Heap)就是为了实现优先队列而设计的一种数据结构，它是通过构造二叉堆(二叉树的一种)实现。根节点最大的堆叫做最大堆或大根堆（SplMaxHeap），根节点最小的堆叫做最小堆或小根堆（SplMinHeap）。二叉堆还常用于排序(堆排序)</p>
<ul class=" list-paddingleft-2">
<li>
<p><a href="http://php.net/manual/zh/class.splheap.php">SplHeap</a></p>
</li>
<ul class=" list-paddingleft-2">
<li>
<p><a href="http://php.net/manual/zh/class.splmaxheap.php">SplMaxHeap</a></p>
</li>
<li>
<p><a href="http://php.net/manual/zh/class.splminheap.php">SplMinHeap</a></p>
</li>
</ul>
<li>
<p><a href="http://php.net/manual/zh/class.splpriorityqueue.php">SplPriorityQueue</a></p>
</li>
</ul>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">abstract</span> SplHeap <span style="color: #0000ff;">implements</span> Iterator ,<span style="color: #000000;"> Countable {    
    </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 方法 用法同双向链表一致 </span><span style="color: #008000;">*/</span>
    <span style="color: #0000ff;">public</span><span style="color: #000000;"> __construct ( void )    
    </span><span style="color: #0000ff;">abstract</span> <span style="color: #0000ff;">protected</span> int compare ( <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$value1</span> , <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$value2</span><span style="color: #000000;"> )    
    </span><span style="color: #0000ff;">public</span> int <span style="color: #008080;">count</span><span style="color: #000000;"> ( void )    
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> <span style="color: #008080;">current</span><span style="color: #000000;"> ( void )    
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> <span style="color: #008080;">extract</span><span style="color: #000000;"> ( void )    
    </span><span style="color: #0000ff;">public</span> void insert ( <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$value</span><span style="color: #000000;"> )    
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> bool isEmpty ( void )    
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> <span style="color: #008080;">key</span><span style="color: #000000;"> ( void )    
    </span><span style="color: #0000ff;">public</span> void <span style="color: #008080;">next</span><span style="color: #000000;"> ( void )    
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> void recoverFromCorruption ( void )    
    </span><span style="color: #0000ff;">public</span> void <span style="color: #008080;">rewind</span><span style="color: #000000;"> ( void )    
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span><span style="color: #000000;"> top ( void )    
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> bool valid ( void )
}</span></code></pre>

<p>&nbsp;</p>
<p>使用方法：</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;">堆</span>
<span style="color: #0000ff;">class</span> MySplHeap <span style="color: #0000ff;">extends</span><span style="color: #000000;"> SplHeap{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">compare()方法用来比较两个元素的大小，绝对他们在堆中的位置</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">function</span> compare( <span style="color: #800080;">$value1</span>, <span style="color: #800080;">$value2</span><span style="color: #000000;"> ) {
        </span><span style="color: #0000ff;">return</span> ( <span style="color: #800080;">$value1</span> - <span style="color: #800080;">$value2</span><span style="color: #000000;"> );
        }
}
 
</span><span style="color: #800080;">$obj</span> = <span style="color: #0000ff;">new</span><span style="color: #000000;"> MySplHeap();
</span><span style="color: #800080;">$obj</span>-&gt;insert(0<span style="color: #000000;">);
</span><span style="color: #800080;">$obj</span>-&gt;insert(1<span style="color: #000000;">);
</span><span style="color: #800080;">$obj</span>-&gt;insert(2<span style="color: #000000;">);
</span><span style="color: #800080;">$obj</span>-&gt;insert(3<span style="color: #000000;">);
</span><span style="color: #800080;">$obj</span>-&gt;insert(4<span style="color: #000000;">);
</span><span style="color: #0000ff;">echo</span> <span style="color: #800080;">$obj</span>-&gt;top();<span style="color: #008000;">//</span><span style="color: #008000;">4</span>
<span style="color: #0000ff;">echo</span> <span style="color: #800080;">$obj</span>-&gt;<span style="color: #008080;">count</span>();<span style="color: #008000;">//</span><span style="color: #008000;">5</span>
 
<span style="color: #0000ff;">foreach</span> (<span style="color: #800080;">$obj</span> <span style="color: #0000ff;">as</span> <span style="color: #800080;">$item</span><span style="color: #000000;">) {
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800080;">$item</span>."&lt;br /&gt;"<span style="color: #000000;">;
}</span></code></pre>

<p><span style="font-size: 1.5em;">阵列</span>&nbsp;</p>
<p>优先队列也是非常实用的一种数据结构，可以通过加权对值进行排序，由于排序在php内部实现，业务代码中将精简不少而且更高效。通过SplPriorityQueue::setExtractFlags(int &nbsp;$flag)设置提取方式可以提取数据（等同最大堆）、优先级、和两者都提取的方式。</p>
<ul class=" list-paddingleft-2">
<li>
<p><a href="http://php.net/manual/zh/class.splfixedarray.php">SplFixedArray</a></p>
</li>
</ul>
<src class="cnblogs_code">
<pre><code>SplFixedArray <span style="color: #0000ff;">implements</span> Iterator , ArrayAccess ,<span style="color: #000000;"> Countable {
　　</span><span style="color: #008000;">/*</span><span style="color: #008000;"> 方法 </span><span style="color: #008000;">*/</span>　　
　　<span style="color: #0000ff;">public</span> __construct ([ int <span style="color: #800080;">$size</span> = 0<span style="color: #000000;"> ] )
　　</span><span style="color: #0000ff;">public</span> int <span style="color: #008080;">count</span><span style="color: #000000;"> ( void )
　　</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> <span style="color: #008080;">current</span><span style="color: #000000;"> ( void )
　　</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> SplFixedArray fromArray ( <span style="color: #0000ff;">array</span> <span style="color: #800080;">$array</span> [, bool <span style="color: #800080;">$save_indexes</span> = <span style="color: #0000ff;">true</span><span style="color: #000000;"> ] )
　　</span><span style="color: #0000ff;">public</span><span style="color: #000000;"> int getSize ( void )
　　</span><span style="color: #0000ff;">public</span> int <span style="color: #008080;">key</span><span style="color: #000000;"> ( void )
　　</span><span style="color: #0000ff;">public</span> void <span style="color: #008080;">next</span><span style="color: #000000;"> ( void )
　　</span><span style="color: #0000ff;">public</span> bool offsetExists ( int <span style="color: #800080;">$index</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> offsetGet ( int <span style="color: #800080;">$index</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> void offsetSet ( int <span style="color: #800080;">$index</span> , <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$newval</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> void offsetUnset ( int <span style="color: #800080;">$index</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> void <span style="color: #008080;">rewind</span><span style="color: #000000;"> ( void )
　　</span><span style="color: #0000ff;">public</span> int setSize ( int <span style="color: #800080;">$size</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">array</span><span style="color: #000000;"> toArray ( void )
　　</span><span style="color: #0000ff;">public</span><span style="color: #000000;"> bool valid ( void )
　　</span><span style="color: #0000ff;">public</span><span style="color: #000000;"> void __wakeup ( void )
}</span></code></pre>

<p>&nbsp;</p>
<p>使用方法：&nbsp;</p>
<src class="cnblogs_code">
<pre><code><span style="color: #800080;">$arr</span> = <span style="color: #0000ff;">new</span> SplFixedArray(4<span style="color: #000000;">);
</span><span style="color: #800080;">$arr</span>[0] = 'php'<span style="color: #000000;">;
</span><span style="color: #800080;">$arr</span>[1] = 1<span style="color: #000000;">;
</span><span style="color: #800080;">$arr</span>[3] = 'python';<span style="color: #008000;">//</span><span style="color: #008000;">遍历， $arr[2] 为null</span>
<span style="color: #0000ff;">foreach</span>(<span style="color: #800080;">$arr</span> <span style="color: #0000ff;">as</span> <span style="color: #800080;">$v</span><span style="color: #000000;">) {
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800080;">$v</span> . <span style="color: #ff00ff;">PHP_EOL</span><span style="color: #000000;">;
}
 
</span><span style="color: #008000;">//</span><span style="color: #008000;">获取数组长度</span>
<span style="color: #0000ff;">echo</span> <span style="color: #800080;">$arr</span>-&gt;getSize(); <span style="color: #008000;">//</span><span style="color: #008000;">4
 
//增加数组长度</span>
<span style="color: #800080;">$arr</span>-&gt;setSize(5<span style="color: #000000;">);
</span><span style="color: #800080;">$arr</span>[4] = 'new one'<span style="color: #000000;">;
 
</span><span style="color: #008000;">//</span><span style="color: #008000;">捕获异常</span>
<span style="color: #0000ff;">try</span><span style="color: #000000;">{
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800080;">$arr</span>[10<span style="color: #000000;">];
} </span><span style="color: #0000ff;">catch</span> (RuntimeException <span style="color: #800080;">$e</span><span style="color: #000000;">) {
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800080;">$e</span>-&gt;<span style="color: #000000;">getMessage();
}</span></code></pre>

<p>&nbsp;</p>
<p><span style="font-size: 1.5em;"><br />映射</span>&nbsp;</p>
<p>用来存储一组对象的，特别是当你需要唯一标识对象的时候。</p>
<ul class=" list-paddingleft-2">
<li>
<p><a href="http://php.net/manual/zh/class.splobjectstorage.php">SplObjectStorage</a></p>
</li>
</ul>
<src class="cnblogs_code">
<pre><code>SplObjectStorage <span style="color: #0000ff;">implements</span> Countable , Iterator , Serializable ,<span style="color: #000000;"> ArrayAccess {
　　</span><span style="color: #008000;">/*</span><span style="color: #008000;"> 方法 </span><span style="color: #008000;">*/</span>　　
　　<span style="color: #0000ff;">public</span> void addAll ( SplObjectStorage <span style="color: #800080;">$storage</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> void attach ( <span style="color: #0000ff;">object</span> <span style="color: #800080;">$object</span> [, <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$data</span> = <span style="color: #0000ff;">NULL</span><span style="color: #000000;"> ] )
　　</span><span style="color: #0000ff;">public</span> bool contains ( <span style="color: #0000ff;">object</span> <span style="color: #800080;">$object</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> int <span style="color: #008080;">count</span><span style="color: #000000;"> ( void )
　　</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">object</span> <span style="color: #008080;">current</span><span style="color: #000000;"> ( void )
　　</span><span style="color: #0000ff;">public</span> void detach ( <span style="color: #0000ff;">object</span> <span style="color: #800080;">$object</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span> getHash ( <span style="color: #0000ff;">object</span> <span style="color: #800080;">$object</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span><span style="color: #000000;"> getInfo ( void )
　　</span><span style="color: #0000ff;">public</span> int <span style="color: #008080;">key</span><span style="color: #000000;"> ( void )
　　</span><span style="color: #0000ff;">public</span> void <span style="color: #008080;">next</span><span style="color: #000000;"> ( void )
　　</span><span style="color: #0000ff;">public</span> bool offsetExists ( <span style="color: #0000ff;">object</span> <span style="color: #800080;">$object</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">mixed</span> offsetGet ( <span style="color: #0000ff;">object</span> <span style="color: #800080;">$object</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> void offsetSet ( <span style="color: #0000ff;">object</span> <span style="color: #800080;">$object</span> [, <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$data</span> = <span style="color: #0000ff;">NULL</span><span style="color: #000000;"> ] )
　　</span><span style="color: #0000ff;">public</span> void offsetUnset ( <span style="color: #0000ff;">object</span> <span style="color: #800080;">$object</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> void removeAll ( SplObjectStorage <span style="color: #800080;">$storage</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> void removeAllExcept ( SplObjectStorage <span style="color: #800080;">$storage</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> void <span style="color: #008080;">rewind</span><span style="color: #000000;"> ( void )
　　</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span> <span style="color: #008080;">serialize</span><span style="color: #000000;"> ( void )
　　</span><span style="color: #0000ff;">public</span> void setInfo ( <span style="color: #0000ff;">mixed</span> <span style="color: #800080;">$data</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span> void <span style="color: #008080;">unserialize</span> ( <span style="color: #0000ff;">string</span> <span style="color: #800080;">$serialized</span><span style="color: #000000;"> )
　　</span><span style="color: #0000ff;">public</span><span style="color: #000000;"> bool valid ( void )
}</span></code></pre>

<p>&nbsp;</p>
<p>使用方法：&nbsp;</p>
<src class="cnblogs_code">
<pre><code><span style="color: #0000ff;">class</span><span style="color: #000000;"> A {
    </span><span style="color: #0000ff;">public</span> <span style="color: #800080;">$i</span><span style="color: #000000;">;    
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">function</span> __construct(<span style="color: #800080;">$i</span><span style="color: #000000;">) {
        </span><span style="color: #800080;">$this</span>-&gt;i = <span style="color: #800080;">$i</span><span style="color: #000000;">;
    }
} 
 
</span><span style="color: #800080;">$a1</span> = <span style="color: #0000ff;">new</span> A(1<span style="color: #000000;">);
</span><span style="color: #800080;">$a2</span> = <span style="color: #0000ff;">new</span> A(2<span style="color: #000000;">);
</span><span style="color: #800080;">$a3</span> = <span style="color: #0000ff;">new</span> A(3<span style="color: #000000;">);
</span><span style="color: #800080;">$a4</span> = <span style="color: #0000ff;">new</span> A(4<span style="color: #000000;">); 
 
</span><span style="color: #800080;">$container</span> = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SplObjectStorage(); 
 
</span><span style="color: #008000;">//</span><span style="color: #008000;">SplObjectStorage::attach 添加对象到Storage中</span>
<span style="color: #800080;">$container</span>-&gt;attach(<span style="color: #800080;">$a1</span><span style="color: #000000;">);
</span><span style="color: #800080;">$container</span>-&gt;attach(<span style="color: #800080;">$a2</span><span style="color: #000000;">);
</span><span style="color: #800080;">$container</span>-&gt;attach(<span style="color: #800080;">$a3</span><span style="color: #000000;">); 
 
</span><span style="color: #008000;">//</span><span style="color: #008000;">SplObjectStorage::detach 将对象从Storage中移除</span>
<span style="color: #800080;">$container</span>-&gt;detach(<span style="color: #800080;">$a2</span><span style="color: #000000;">); 
 
</span><span style="color: #008000;">//</span><span style="color: #008000;">SplObjectStorage::contains用于检查对象是否存在Storage中</span>
<span style="color: #008080;">var_dump</span>(<span style="color: #800080;">$container</span>-&gt;contains(<span style="color: #800080;">$a1</span>)); <span style="color: #008000;">//</span><span style="color: #008000;">true</span>
<span style="color: #008080;">var_dump</span>(<span style="color: #800080;">$container</span>-&gt;contains(<span style="color: #800080;">$a4</span>)); <span style="color: #008000;">//</span><span style="color: #008000;">false
 
//遍历</span>
<span style="color: #800080;">$container</span>-&gt;<span style="color: #008080;">rewind</span><span style="color: #000000;">();
</span><span style="color: #0000ff;">while</span>(<span style="color: #800080;">$container</span>-&gt;<span style="color: #000000;">valid()) {
    </span><span style="color: #008080;">var_dump</span>(<span style="color: #800080;">$container</span>-&gt;<span style="color: #008080;">current</span><span style="color: #000000;">());    
    </span><span style="color: #800080;">$container</span>-&gt;<span style="color: #008080;">next</span><span style="color: #000000;">();
}</span></code></pre>

<p>&nbsp;</p>
<p>原文地址：<a href="http://www.imooc.com/article/34286">http://www.imooc.com/article/34286</a></p>

</div></div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>