<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修CentOS7编译安装php7.1' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>CentOS7编译安装php7.1</center></div><div class='banquan'>原文出处:本文由博客园博主郑帅杰提供。<br/>
原文连接:https://www.cnblogs.com/52lnamp/p/10729356.html</div><br>
    <p><strong>1.首先安装依赖包:</strong></p>
<src class="cnblogs_code">
<pre><code>yum install libxml2 libxml2-devel openssl openssl-devel bzip2 bzip2-devel libcurl libcurl-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel gmp gmp-devel libmcrypt libmcrypt-devel readline readline-devel libxslt libxslt-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel ncurses curl gdbm-devel db4-devel libXpm-devel libX11-devel gd-devel gmp-devel expat-devel xmlrpc-c xmlrpc-c-devel libicu-devel libmcrypt-devel libmemcached-devel&nbsp;</code></pre>

<p><strong>2.下载PHP压缩包并解压:</strong></p>
<src class="cnblogs_code">
<pre><code>wget http://php.net/distributions/php-7.1.0.tar.gz
tar -zxvf php-7.1.0.tar.gz
cd php-7.1.0</code></pre>

<p><strong>3.编译安装,编译的时候可能会出现各种报错情况,下一篇主要写编译是常见的错误及解决办法:</strong></p>
<src class="cnblogs_code">
<pre><code>./configure \
--prefix=/usr/local/php \
--with-config-file-path=/etc \
--enable-fpm \
--enable-inline-optimization \
--disable-debug \
--disable-rpath \
--enable-shared  \
--enable-soap \
--with-libxml-dir \
--with-xmlrpc \
--with-openssl \
--with-mcrypt \
--with-mhash \
--with-pcre-regex \
--with-sqlite3 \
--with-zlib \
--enable-bcmath \
--with-iconv \
--with-bz2 \
--enable-calendar \
--with-curl \
--with-cdb \
--enable-dom \
--enable-exif \
--enable-fileinfo \
--enable-filter \
--with-pcre-dir \
--enable-ftp \
--with-gd \
--with-openssl-dir \
--with-jpeg-dir \
--with-png-dir \
--with-zlib-dir  \
--with-freetype-dir \
--enable-gd-native-ttf \
--enable-gd-jis-conv \
--with-gettext \
--with-gmp \
--with-mhash \
--enable-json \
--enable-mbstring \
--enable-mbregex \
--enable-mbregex-backtrack \
--with-libmbfl \
--with-onig \
--enable-pdo \
--with-mysqli=mysqlnd \
--with-pdo-mysql=mysqlnd \
--with-zlib-dir \
--with-pdo-sqlite \
--with-readline \
--enable-session \
--enable-shmop \
--enable-simplexml \
--enable-sockets  \
--enable-sysvmsg \
--enable-sysvsem \
--enable-sysvshm \
--enable-wddx \
--with-libxml-dir \
--with-xsl \
--enable-zip \
--enable-mysqlnd-compression-support \
--with-pear \
--enable-opcache</code></pre>

<p><strong><span class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-courier-new"><strong>4.编译成功后安装:</strong><br /></span></strong></p>
<src class="cnblogs_code">
<pre><code>make &amp;&amp; make install</code></pre>

<p><span class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-courier-new"><span class="crayon-pre crayon-code"><span class="crayon-v"><span class="crayon-h"><span class="crayon-o"><span class="crayon-h"><span class="crayon-e"><span class="crayon-v"><strong>5.安装成功后配置环境变量:</strong></span></span></span></span></span></span></span></span></p>
<p>为了使用方便，可以在 /etc/profile文件末尾添加php环境变量 ：</p>
<src class="cnblogs_code">
<pre><code>PATH=$PATH:/usr/local/php/bin <br />export PATH　　</code></pre>

<p>保存后刷新环境变量:</p>
<src class="cnblogs_code">
<pre><code>source /etc/profile　　#更新</code></pre>

<p>查看环境变量：</p>
<src class="cnblogs_code">
<pre><code>echo $PATH</code></pre>

<p>看到php环境变量的路径后，以后就可以直接使用php命令了，查看php版本：</p>
<src class="cnblogs_code">
<pre><code>php -v</code></pre>

<p><strong>6.现在的PHP没有.ini文件和配置文件,还需要配置PHP-FPM:</strong></p>
<src class="cnblogs_code">
<pre><code>cp php.ini-production /etc/<span style="color: #000000;">php.ini<br />
cp </span>/usr/local/php/etc/php-fpm.conf.<span style="color: #0000ff;">default</span> /usr/local/php/etc/php-<span style="color: #000000;">fpm.conf<br />
cp </span>/usr/local/php/etc/php-fpm.d/www.conf.<span style="color: #0000ff;">default</span> /usr/local/php/etc/php-fpm.d/<span style="color: #000000;">www.conf<br />
cp sapi</span>/fpm/init.d.php-fpm /etc/init.d/php-<span style="color: #000000;">fpm<br />
chmod </span>+x /etc/init.d/php-fpm</code></pre>

<p>php-fpm的启动、停止和重启:</p>
<src class="cnblogs_code">
<pre><code>service php-fpm start　　#启动</code></pre>
<pre><code>service php-fpm stop　　 #停止</code></pre>
<pre><code>service php-fpm restart #重启</code></pre>

<p>&nbsp;<img src="./images/CentOS7编译安装php7.10.jpg" alt="" /></p>

</div></div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>