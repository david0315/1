<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修PHP 将数据从 Laravel 传送到 vue 的四种方式' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>PHP 将数据从 Laravel 传送到 vue 的四种方式</center></div><div class='banquan'>原文出处:本文由博客园博主程序媛的明天提供。<br/>
原文连接:https://www.cnblogs.com/a609251438/p/11792242.html</div><br>
    <p>&nbsp; &nbsp; &nbsp; &nbsp;在过去的两三年里，我一直在研究同时使用 Vue 和 Laravel 的项目，在每个项目开发的开始阶段，我必须问自己 &ldquo;我将如何将数据从 Laravel 传递到 Vue ？&rdquo;。这适用于 Vue 前端组件与Blade模板紧密耦合的两个应用程序，以及运行完全独立于 Laravel 后端的单页应用程序。</p>
<p>这里有四种不同的方法从一个到另一个获取数据。</p>
<h2>直接回显到数据对象或组件属性中</h2>
<p><span data-cke-copybin-start="1">​<span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_focused cke_widget_selected" data-cke-widget-wrapper="1" data-cke-filter="off" data-cke-display-name="图像" data-cke-widget-id="6"><img class="has cke_widget_element" src="./images/PHP 将数据从 Laravel 传送到 vue 的四种方式0.jpg" alt="" width="1079" height="428" data-cke-saved-src="./images/PHP 将数据从 Laravel 传送到 vue 的四种方式0.jpg" data-cke-widget-data="{&amp;quot;hasCaption&amp;quot;:false,&amp;quot;src&amp;quot;:&amp;quot;./images/PHP 将数据从 Laravel 传送到 vue 的四种方式0.jpg&amp;quot;,&amp;quot;alt&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;width&amp;quot;:&amp;quot;1079&amp;quot;,&amp;quot;height&amp;quot;:&amp;quot;428&amp;quot;,&amp;quot;lock&amp;quot;:true,&amp;quot;align&amp;quot;:&amp;quot;none&amp;quot;,&amp;quot;classes&amp;quot;:{&amp;quot;has&amp;quot;:1}}" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="" width="15" height="15" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​<span data-cke-copybin-end="1">​</span></span></span></span></span></p>
<ul>
<li><strong>赞成</strong>: 简单明了</li>
<li><strong>反对</strong>: 必须与嵌入到Blade模板中的Vue应用程序一起使用</li>
</ul>
<p>可以说是将数据从 Laravel 应用程序移动到 Vue 前端的最简单方法。使用上面的任何一种方法，您都可以将 JSON 编码的数据回送给您的应用程序或其组件。</p>
<p>然而，最大的缺点是可扩展性。您的 JavaScript 需要直接暴露在模板文件中，以便引擎可以呈现您的数据。如果您使用 Vue 向 Laravel 站点的页面或区域添加一些基本的交互，这应该不是问题，但是您很容易就会遇到将数据强制放入压缩脚本的困难。</p>
<p><span data-cke-copybin-start="1">​<span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_focused cke_widget_selected" data-cke-widget-wrapper="1" data-cke-filter="off" data-cke-display-name="图像" data-cke-widget-id="5"><img class="has cke_widget_element" src="./images/PHP 将数据从 Laravel 传送到 vue 的四种方式2.jpg" alt="" width="1081" height="150" data-cke-saved-src="./images/PHP 将数据从 Laravel 传送到 vue 的四种方式2.jpg" data-cke-widget-data="{&amp;quot;hasCaption&amp;quot;:false,&amp;quot;src&amp;quot;:&amp;quot;./images/PHP 将数据从 Laravel 传送到 vue 的四种方式2.jpg&amp;quot;,&amp;quot;alt&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;width&amp;quot;:&amp;quot;1081&amp;quot;,&amp;quot;height&amp;quot;:&amp;quot;150&amp;quot;,&amp;quot;lock&amp;quot;:true,&amp;quot;align&amp;quot;:&amp;quot;none&amp;quot;,&amp;quot;classes&amp;quot;:{&amp;quot;has&amp;quot;:1}}" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="" width="15" height="15" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​<span data-cke-copybin-end="1">​</span></span></span></span></span></p>
<p>对于 Laravel 5.5+ 使用 json 指令：</p>
<p>使用自定义组件和 Laravel 自身的 <code>json</code> blade指令可以让您轻松地将数据移动到道具中。此方法允许您划分 Vue 代码，将脚本与 Webpack 或 Mix 捆绑在一起，同时仍可以直接向其中注入数据。</p>
<h2>将属性作为全局窗口注入</h2>
<p><span data-cke-copybin-start="1">​<span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_focused cke_widget_selected" data-cke-widget-wrapper="1" data-cke-filter="off" data-cke-display-name="图像" data-cke-widget-id="4"><img class="has cke_widget_element" src="./images/PHP 将数据从 Laravel 传送到 vue 的四种方式4.jpg" alt="" width="1067" height="256" data-cke-saved-src="./images/PHP 将数据从 Laravel 传送到 vue 的四种方式4.jpg" data-cke-widget-data="{&amp;quot;hasCaption&amp;quot;:false,&amp;quot;src&amp;quot;:&amp;quot;./images/PHP 将数据从 Laravel 传送到 vue 的四种方式4.jpg&amp;quot;,&amp;quot;alt&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;width&amp;quot;:&amp;quot;1067&amp;quot;,&amp;quot;height&amp;quot;:&amp;quot;256&amp;quot;,&amp;quot;lock&amp;quot;:true,&amp;quot;align&amp;quot;:&amp;quot;none&amp;quot;,&amp;quot;classes&amp;quot;:{&amp;quot;has&amp;quot;:1}}" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="" width="15" height="15" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​<span data-cke-copybin-end="1">​</span></span></span></span></span></p>
<ul>
<li><strong>赞成</strong>: 在整个Vue应用程序和任何其他脚本中全局可用</li>
<li><strong>反对</strong>: 可能很混乱，通常不建议用于大型数据集</li>
</ul>
<p>虽然这看起来有点老生常谈，但将数据添加到窗口对象中可以轻松地创建全局变量，这些变量可以从应用程序中使用的任何其他脚本或组件访问。在过去，我用它作为存储和访问 API 基 URL、公钥、特定模型 ID 和各种其他需要在整个前端使用的小数据项的方法。</p>
<p>不过，使用此方法有一点需要注意，这就是访问 Vue 组件内部数据的方式。在模板内部，您将无法使用以下内容，因为 Vue 假定您尝试访问的窗口对象位于同一组件内：</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span> <span style="color: #008000;">//</span><span style="color: #008000;"> 不会起作用</span>
<span style="color: #008080;">2</span> &lt;template&gt;
<span style="color: #008080;">3</span>     &lt;div v-<span style="color: #0000ff;">if</span>="window.showSecretWindow"&gt;
<span style="color: #008080;">4</span>         &lt;h1&gt;这是个秘密窗口，别告诉任何人！&lt;/h1&gt;
<span style="color: #008080;">5</span>     &lt;/div&gt;
<span style="color: #008080;">6</span> &lt;/template&gt;</code></pre>

<p>相反，您需要使用返回值的计算方法：</p>
<src class="cnblogs_code">
<pre><code><span style="color: #008000;">//</span><span style="color: #008000;"> 会起作用</span>
&lt;template&gt;
    &lt;div v-<span style="color: #0000ff;">if</span>="showSecretWindow"&gt;
        &lt;h1&gt;这是个秘密窗口，别告诉任何人！&lt;/h1&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;<span style="color: #000000;">
    export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
        computed</span>:<span style="color: #000000;"> {
            showSecretWindow() {
                </span><span style="color: #0000ff;">return</span> window.<span style="color: #000000;">showSecretWindow;
            }
        }
    }
</span>&lt;/script&gt;</code></pre>

<p>如果这个方法的用例是较小的字符串或数值，并且使用 Laravel自身的 mix 来编译，那么事情实际上会变得非常简单。您可以使用 process.env 对象引用 JavaScript 中 <code>.env</code> 文件中的值。例如，如果我的环境变量文件中有 <code>API_DOMAIN=example.com</code>，我可以在我的 Vue 组件（或使用 mix 编译的其他 JavaScript ）中使用<code>process.env.API_DOMAIN</code>。</p>
<h2>将 API 与 Laravel 自身的 web 中间件和 CSRF 令牌一起使用</h2>
<p><span data-cke-copybin-start="1">​<span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_focused cke_widget_selected" data-cke-widget-wrapper="1" data-cke-filter="off" data-cke-display-name="图像" data-cke-widget-id="1"><img class="has cke_widget_element" src="./images/PHP 将数据从 Laravel 传送到 vue 的四种方式6.jpg" alt="" width="1073" height="316" data-cke-saved-src="./images/PHP 将数据从 Laravel 传送到 vue 的四种方式6.jpg" data-cke-widget-data="{&amp;quot;hasCaption&amp;quot;:false,&amp;quot;src&amp;quot;:&amp;quot;./images/PHP 将数据从 Laravel 传送到 vue 的四种方式6.jpg&amp;quot;,&amp;quot;alt&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;width&amp;quot;:&amp;quot;1073&amp;quot;,&amp;quot;height&amp;quot;:&amp;quot;316&amp;quot;,&amp;quot;lock&amp;quot;:true,&amp;quot;align&amp;quot;:&amp;quot;none&amp;quot;,&amp;quot;classes&amp;quot;:{&amp;quot;has&amp;quot;:1}}" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="" width="15" height="15" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​<span data-cke-copybin-end="1">​</span></span></span></span></span></p>
<ul>
<li><strong>赞成</strong>: 易于启动，非常适合单页应用程序</li>
<li><strong>反对</strong>: 要求前端由 Blade 模板呈现</li>
</ul>
<p>对我来说，这个解决方案是 Vue 前端 + Laravel 后端世界中最简单的入门方法。 Laravel 提供了两个不同的路由文件：web.php 和 api.php。它们被拉入并通过应用程序<strong>Providers</strong>目录中的 <code>RouteServiceProvider.php</code> 文件映射。默认情况下，web 组的中间件设置为 web，api 组的中间件设置为api。</p>
<p>追溯到 <code>app/Http/Kernel.php</code>；您会注意到，在第30行左右，有两个组被映射到一个数组中，这个 web 组包含会话、 cookie 加密和 CSRF 令牌验证等内容。同时，api 组只有一个基本的限制和一些绑定。如果您的目标只是通过一个基本的、轻量级的 api 将信息拉入 Vue ，而这个 api 不需要身份验证或 post 请求，那么您可以到此为止。否则，可以进行一次修改，以确保在几秒钟内与 Vue 完全兼容。</p>
<p>回到上面的 <code>RouteServiceProvider</code>, 交换出 <strong>web</strong> 方法中的 <strong>api</strong> 中间件。我们为什么要这样做？这样做有什么作用吗？它使我们通过 api 拉入的路由也可以包含应用程序的常规网络路由通常会使用到的所有会话标量和令牌。当使用 axios 或者其他异步 JavaScript http 调用的时候，我们可以在后端使 Auth::user() 或者其他的验证技术，而默认的 api 就无法做到这些。</p>
<p>这个方法唯一警告的是，你必须使用 Laravel 和 一个 blade 模板来渲染前端。这样框架可以将必要的会话令牌和变量注入到请求当中。</p>
<h2>使用 JWT 认证的 API 调用</h2>
<p><span data-cke-copybin-start="1">​<span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_focused cke_widget_selected" data-cke-widget-wrapper="1" data-cke-filter="off" data-cke-display-name="图像" data-cke-widget-id="0"><img class="has cke_widget_element" src="./images/PHP 将数据从 Laravel 传送到 vue 的四种方式8.jpg" alt="" width="1049" height="338" data-cke-saved-src="./images/PHP 将数据从 Laravel 传送到 vue 的四种方式8.jpg" data-cke-widget-data="{&amp;quot;hasCaption&amp;quot;:false,&amp;quot;src&amp;quot;:&amp;quot;./images/PHP 将数据从 Laravel 传送到 vue 的四种方式8.jpg&amp;quot;,&amp;quot;alt&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;width&amp;quot;:&amp;quot;1049&amp;quot;,&amp;quot;height&amp;quot;:&amp;quot;338&amp;quot;,&amp;quot;lock&amp;quot;:true,&amp;quot;align&amp;quot;:&amp;quot;none&amp;quot;,&amp;quot;classes&amp;quot;:{&amp;quot;has&amp;quot;:1}}" data-cke-widget-upcasted="1" data-cke-widget-keep-attr="0" data-widget="image" /><span class="cke_reset cke_widget_drag_handler_container"><img class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="" width="15" height="15" data-cke-widget-drag-handler="1" /><span class="cke_image_resizer" title="点击并拖拽以改变尺寸">​<span data-cke-copybin-end="1">​</span></span></span></span></span></p>
<ul>
<li><strong>赞成</strong>: 最安全和解耦的选项</li>
<li><strong>反对</strong>: 需要安装以及配置第三方程序包</li>
</ul>
<p><strong>J</strong>SON <strong>W</strong>eb <strong>T</strong>okens 是安全的，易于使用的方法来锁定对API 端点的访问，并使用了 Tymon&rsquo;s <strong><a href="https://link.zhihu.com/?target=https%3A//github.com/tymondesigns/jwt-auth" data-cke-saved-href="https://link.zhihu.com/?target=https%3A//github.com/tymondesigns/jwt-auth">jwt-auth</a></strong> 扩展包，在这个基础上，用来构建新的项目或者在现有的 Laravel 应用中使用绝对是一件简单的事情。</p>
<p>要在 API 上安装和配置此功能，只需要几个简单的步骤：</p>
<ol>
<li>在你的应用根目录运行 <code>composer require tymon/jwt-auth</code>。在写这篇文章的时候正处于过渡时期，因此你可能需要指定版本(例如 1.0.0-rc.5)。</li>
<li>如果你使用的是 Laravel5.4 及更低的版本，将该行 <code>Tymon\JWTAuth\Providers\LaravelServiceProvider::class,</code> 加入 config/app.php 的 providers 数组当中。</li>
<li>通过运行 <code>php artisan vendor:publish</code> 来选择 jwt-auth 软件包发布配置文件。</li>
<li>运行 <code>php artisan jwt:secret</code> 以生成签名应用程序令牌所需要的密钥。</li>
</ol>
<p>完成之后，你需要决定哪些路由将受 JWT 保护并针对 JWT 进行身份验证。你可以使用内置的 api auth 中间件来执行此操作,或者也可以自己滚动在发送请求的过程中获取令牌。在 API 的登录方法中，你将使用相同的 <code>auth()-&gt;attempt</code> 方法作为默认的Laravel应用程序，但从它返回的除外是你应该传递回的 JSON Web Token 令牌。</p>
<p>从那里，你的 Vue 应用程序应该存储该令牌(存储在 LocalStorage 或者 Vuex)，在每一个传出请求中，都将它加入到 Authorization header 作为授权头。回到你的 Laravel 应用，你可以使用他们的令牌来引用特定用户的请求。将应该显示给他们的数据返回回去。</p>
<p>&nbsp;</p>
<p><strong>大型laravel项目实战直播加入（点击&rarr;）<a href="http://ttps//jq.qq.com/?_wv=1027&amp;k=5ZSr91E" data-cke-saved-href="http://ttps//jq.qq.com/?_wv=1027&amp;k=5ZSr91E">我的直播群</a>677079770</strong></p>

</div></div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>