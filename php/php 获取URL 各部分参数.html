<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修php 获取URL 各部分参数' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>php 获取URL 各部分参数</center></div><div class='banquan'>原文出处:本文由博客园博主子钦加油提供。<br/>
原文连接:https://www.cnblogs.com/zmdComeOn/p/10681443.html</div><br>
    <h1 class="postTitle">URL处理几个关键的函数<span style="color: #ff0000;">parse_url</span>、<span style="color: #ff0000;">parse_str</span>与<span style="color: #ff0000;">http_build_query</span></h1>
<p><span style="font-size: 18px;"><strong>parse_url()</strong></span></p>
<p>该函数可以解析 URL，返回其组成部分。它的用法如下：</p>
<p><span style="color: #ff0000;">array parse_url(string $url)</span></p>
<p>此函数返回一个关联数组，包含现有 URL 的各种组成部分。如果缺少了其中的某一个，则不会为这个组成部分创建数组项。组成部分为：</p>
<ul>
<li>scheme - 如 http&nbsp;</li>
<li>host - 如 localhost</li>
<li>port - 如 80</li>
<li>user&nbsp;</li>
<li>pass&nbsp;</li>
<li>path - 如 /parse_str.php</li>
<li>query - 在问号 ? 之后 &nbsp;如 id=1&amp;category=php&amp;title=php-install</li>
<li>fragment - 在散列符号 # 之后&nbsp;</li>
</ul>
<p>此函数并不意味着给定的 URL 是合法的，它只是将上方列表中的各部分分开。parse_url() 可接受不完整的 URL，并尽量将其解析正确。此函数对相对路径的 URL 不起作用。</p>
<src>
<src id="highlighter_271062" class="syntaxhighlighter  php">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<src class="line number1 index0 alt2">1
<src class="line number2 index1 alt1">2
<src class="line number3 index2 alt2">3
<src class="line number4 index3 alt1">4
<src class="line number5 index4 alt2">5
<src class="line number6 index5 alt1">6
</td>
<td class="code">
<src class="container">
<src class="line number1 index0 alt2"><code class="php plain">&lt;?php</code>
<src class="line number2 index1 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$url</code>&nbsp;<code class="php plain">= </code><code class="php string">"http://52php.cnblogs.com/welcome/"</code><code class="php plain">;</code>
<src class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$parts</code>&nbsp;<code class="php plain">= </code><code class="php functions">parse_url</code><code class="php plain">(</code><code class="php variable">$url</code><code class="php plain">);</code>
<src class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;
<src class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">print_r(</code><code class="php variable">$parts</code><code class="php plain">);</code>
<src class="line number6 index5 alt1"><code class="php plain">?&gt;</code>

</td>
</tr>
</tbody>
</table>


<p>程序运行结果如下：</p>
<src>
<src id="highlighter_633339" class="syntaxhighlighter  php">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<src class="line number1 index0 alt2">1
<src class="line number2 index1 alt1">2
<src class="line number3 index2 alt2">3
<src class="line number4 index3 alt1">4
<src class="line number5 index4 alt2">5
<src class="line number6 index5 alt1">6
</td>
<td class="code">
<src class="container">
<src class="line number1 index0 alt2"><code class="php plain">Array </code>
<src class="line number2 index1 alt1"><code class="php plain">( </code>
<src class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[scheme] =&gt; http </code>
<src class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[host] =&gt; 52php.cnblogs.com </code>
<src class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[path] =&gt; /welcome/ </code>
<src class="line number6 index5 alt1"><code class="php plain">)</code>

</td>
</tr>
</tbody>
</table>


<src>
<src id="highlighter_187438" class="syntaxhighlighter  php">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<src class="line number1 index0 alt2">1
<src class="line number2 index1 alt1">2
<src class="line number3 index2 alt2">3
<src class="line number4 index3 alt1">4
<src class="line number5 index4 alt2">5
<src class="line number6 index5 alt1">6
</td>
<td class="code">
<src class="container">
<src class="line number1 index0 alt2"><code class="php plain">&lt;?php</code>
<src class="line number2 index1 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$url</code>&nbsp;<code class="php plain">= </code><code class="php string">'http://username:password@hostname/path?arg=value#anchor'</code><code class="php plain">;</code>
<src class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">print_r(</code><code class="php functions">parse_url</code><code class="php plain">(</code><code class="php variable">$url</code><code class="php plain">));</code>
<src class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code>&nbsp;<code class="php string">'&lt;br /&gt;'</code><code class="php plain">;</code>
<src class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code>&nbsp;<code class="php functions">parse_url</code><code class="php plain">(</code><code class="php variable">$url</code><code class="php plain">, PHP_URL_PATH);</code>
<src class="line number6 index5 alt1"><code class="php plain">?&gt;</code>

</td>
</tr>
</tbody>
</table>


<p>程序输出：</p>
<src>
<src id="highlighter_263074" class="syntaxhighlighter  php">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<src class="line number1 index0 alt2">1
<src class="line number2 index1 alt1">2
<src class="line number3 index2 alt2">3
<src class="line number4 index3 alt1">4
<src class="line number5 index4 alt2">5
<src class="line number6 index5 alt1">6
<src class="line number7 index6 alt2">7
<src class="line number8 index7 alt1">8
<src class="line number9 index8 alt2">9
<src class="line number10 index9 alt1">10
</td>
<td class="code">
<src class="container">
<src class="line number1 index0 alt2"><code class="php plain">Array </code>
<src class="line number2 index1 alt1"><code class="php plain">(</code>
<src class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[scheme] =&gt; http</code>
<src class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[host] =&gt; hostname</code>
<src class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[user] =&gt; username</code>
<src class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[pass] =&gt; password</code>
<src class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[path] =&gt; /path</code>
<src class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[query] =&gt; arg=value</code>
<src class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[fragment] =&gt; anchor</code>
<src class="line number10 index9 alt1"><code class="php plain">)</code>

</td>
</tr>
</tbody>
</table>


<p>可以看到，可以很容易分解出一个URL的各个部，那如果要拿指定的部分出来的话也很容易，如：</p>
<src>
<src id="highlighter_933485" class="syntaxhighlighter  php">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<src class="line number1 index0 alt2">1
</td>
<td class="code">
<src class="container">
<src class="line number1 index0 alt2"><code class="php functions">echo</code>&nbsp;<code class="php functions">parse_url</code><code class="php plain">(</code><code class="php variable">$url</code><code class="php plain">, PHP_URL_PATH);</code>

</td>
</tr>
</tbody>
</table>


<p>就是在第二个参数中，设定如下的参数：PHP_URL_SCHEME,&nbsp;PHP_URL_HOST, PHP_URL_PORT, PHP_URL_USER, PHP_URL_PASS, PHP_URL_PATH, PHP_URL_QUERY or PHP_URL_FRAGMENT。</p>
<p>&nbsp;</p>
<hr />
<p>&nbsp;</p>
<p><span style="font-size: 18px;"><strong>parse_str()</strong></span></p>
<p>parse_str用来解析URL中的查询字符串，即可以通过$_SERVER['QUERY_STRING']取得的字符串值，假如我们请求的URL是 http://localhost/parse_str.php?id=1&amp;category=php&amp;title=php-install，那么$_SERVER['QUERY_STRING']返回的值为id=1&amp;category=php&amp;title=php-install，而这种形式的字符串恰巧可以使用parse_str解析成关联数组的形式。</p>
<p>用法如下：</p>
<p>void parse_str(string $str [, array &amp;$arr ])</p>
<p>该函数接收两个参数，$str为需要解析的字符串，而可选参数$arr为解析之后生成的数组值所存放的变量名，如果忽略可选参数，那么可以直接调用类似$id、$category、$title的变量。下面的脚本模拟了GET请求。</p>
<src>
<src id="highlighter_622160" class="syntaxhighlighter  php">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<src class="line number1 index0 alt2">1
<src class="line number2 index1 alt1">2
<src class="line number3 index2 alt2">3
<src class="line number4 index3 alt1">4
<src class="line number5 index4 alt2">5
<src class="line number6 index5 alt1">6
<src class="line number7 index6 alt2">7
<src class="line number8 index7 alt1">8
<src class="line number9 index8 alt2">9
<src class="line number10 index9 alt1">10
<src class="line number11 index10 alt2">11
<src class="line number12 index11 alt1">12
<src class="line number13 index12 alt2">13
<src class="line number14 index13 alt1">14
<src class="line number15 index14 alt2">15
<src class="line number16 index15 alt1">16
<src class="line number17 index16 alt2">17
<src class="line number18 index17 alt1">18
<src class="line number19 index18 alt2">19
<src class="line number20 index19 alt1">20
<src class="line number21 index20 alt2">21
<src class="line number22 index21 alt1">22
</td>
<td class="code">
<src class="container">
<src class="line number1 index0 alt2"><code class="php plain">&lt;?php</code>
<src class="line number2 index1 alt1"><code class="php plain">&lt;a href=</code><code class="php string">"http://localhost/parse_str.php?id=1&amp;category=php&amp;title=php-install"</code><code class="php plain">&gt;Click Here&lt;/a&gt;</code>
<src class="line number3 index2 alt2"><code class="php variable">$query_str</code>&nbsp;<code class="php plain">= </code><code class="php variable">$_SERVER</code><code class="php plain">[</code><code class="php string">'QUERY_STRING'</code><code class="php plain">];</code>
<src class="line number4 index3 alt1"><code class="php functions">parse_str</code><code class="php plain">(</code><code class="php variable">$query_str</code><code class="php plain">); </code><code class="php comments">/* 这种方式可以直接使用变量$id, $category, $title */</code>
<src class="line number5 index4 alt2"><code class="php functions">parse_str</code><code class="php plain">(</code><code class="php variable">$query_str</code><code class="php plain">, </code><code class="php variable">$query_arr</code><code class="php plain">);</code>
<src class="line number6 index5 alt1"><code class="php plain">?&gt;</code>
<src class="line number7 index6 alt2"><code class="php plain">&lt;pre&gt;&lt;?php print_r(</code><code class="php variable">$query_arr</code><code class="php plain">); ?&gt;&lt;/pre&gt;</code>
<src class="line number8 index7 alt1"><code class="php plain">&lt;p&gt;&lt;?php </code><code class="php functions">echo</code>&nbsp;<code class="php variable">$id</code><code class="php plain">; ?&gt;&lt;/p&gt;</code>
<src class="line number9 index8 alt2"><code class="php plain">&lt;p&gt;&lt;?php </code><code class="php functions">echo</code>&nbsp;<code class="php variable">$category</code><code class="php plain">; ?&gt;&lt;/p&gt;</code>
<src class="line number10 index9 alt1"><code class="php plain">&lt;p&gt;&lt;?php </code><code class="php functions">echo</code>&nbsp;<code class="php variable">$title</code><code class="php plain">; ?&gt;&lt;/p&gt;</code>
<src class="line number11 index10 alt2"><code class="php plain">?&gt;</code>
<src class="line number12 index11 alt1">&nbsp;
<src class="line number13 index12 alt2"><code class="php comments">/* 运行结果 */</code>
<src class="line number14 index13 alt1"><code class="php plain">Array</code>
<src class="line number15 index14 alt2"><code class="php plain">(</code>
<src class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[id] =&gt; 1</code>
<src class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[category] =&gt; php</code>
<src class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">[title] =&gt; php-install</code>
<src class="line number19 index18 alt2"><code class="php plain">)</code>
<src class="line number20 index19 alt1"><code class="php plain">1</code>
<src class="line number21 index20 alt2"><code class="php plain">php</code>
<src class="line number22 index21 alt1"><code class="php plain">php-install</code>

</td>
</tr>
</tbody>
</table>


<p>&nbsp;</p>
<hr />
<p>&nbsp;</p>
<p><strong><span style="font-size: 18px;">http_build_query</span>&nbsp;</strong>就是将一个数组转换成url ?后面的参数字符串，会自动进行urlencode处理</p>
<p>string&nbsp;http_build_query&nbsp;( array formdata [, string numeric_prefix])</p>
<p>后面的给数组中没有指定键或者键为数字的加下标</p>
<p>官方手册：<a href="http://php.net/manual/zh/function.http-build-query.php" target="_blank">http://php.net/manual/zh/function.http-build-query.php</a></p>

</div></div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>